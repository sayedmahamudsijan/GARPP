<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Shohoz Bazar ‚Äî Shop Easy, Live Easy</title>
  <meta name="description" content="Shohoz Bazar - Mixed online marketplace in Bangladesh. Bangla/English, BDT, Messenger checkout." />

  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Netlify Identity Widget (REQUIRED for /admin login + invite/reset password UI) -->
  <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>

  <style>
    body { margin: 0; padding: 0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial; }
    .line-clamp-2{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;}
  </style>
</head>

<body class="bg-gray-50">
  <div id="root"></div>

  <script type="text/babel">
    const { useEffect, useMemo, useState } = React;

    const formatBDT = (n) => `‡ß≥${Number(n || 0).toLocaleString("en-US")}`;
    const genOrderId = () => `SB${Math.floor(100000 + Math.random() * 900000)}`;

    const BRAND = {
      name: "Shohoz Bazar",
      logo: "SB logoM.png",
      email: "shohoz.bazzar.bd@gmail.com",
      phone: "+880 1703-842165",
      address: "Dhaka, Bangladesh",
      messengerLink: "https://m.me/61582055433127",
      pageId: "61582055433127",
      freeShipThreshold: 500,
      deliveryFee: 60,
    };

    const TRANSLATIONS = {
      en: {
        tagline: "Shop Easy, Live Easy",
        heroTitle: "Welcome to Shohoz Bazar",
        heroSubtitle: "Browse products and checkout instantly via Messenger",
        shopNow: "Shop Now",
        searchPlaceholder: "Search products, brands, categories‚Ä¶",
        topDeals: "Top Deals",
        wishlist: "Wishlist",
        cart: "Cart",
        home: "Home",
        shop: "Shop",
        allProducts: "All Products",
        productsFound: "products found",
        addToCart: "Add to Cart",
        viewDetails: "View Details",
        inStock: "In stock",
        outOfStock: "Out of stock",
        onlyLeft: "Only left",
        delivery: "Delivery",
        reviews: "reviews",
        subtotal: "Subtotal",
        deliveryFee: "Delivery Fee",
        free: "FREE",
        total: "Total",
        coupon: "Coupon",
        apply: "Apply",
        continueShopping: "Continue Shopping",
        emptyCartTitle: "Your cart is empty",
        emptyCartSubtitle: "Add some products to get started!",
        startShopping: "Start Shopping",
        messengerCheckout: "Checkout via Messenger",
        copied: "Copied! Opened Messenger",
        openMessenger: "Open Messenger",
        loading: "Loading products‚Ä¶",
        loadFail: "Could not load products. Check /data/products.json",
        orderCreated: "Order Created!",
        orderMsg: "We copied the order text. Paste it in Messenger to confirm.",
        copyOrder: "Copy Order Text",
        backHome: "Back to Home",
        policies: "Policies",
        quickLinks: "Quick Links",
        about: "About",
        contact: "Contact",
        faq: "FAQ",
        returnRefund: "Return & Refund",
        privacy: "Privacy Policy",
        terms: "Terms & Conditions",
        support: "Support",
        clear: "Clear",
        sortBy: "Sort by",
        sortPopular: "Popular",
        sortLowHigh: "Price: Low ‚Üí High",
        sortHighLow: "Price: High ‚Üí Low",
        filterPrice: "Price Range",
        freeShipHint: "Add more for FREE delivery",
      },
      bn: {
        tagline: "‡¶∏‡¶π‡¶ú‡ßá ‡¶ï‡¶ø‡¶®‡ßÅ‡¶®, ‡¶∏‡¶π‡¶ú‡ßá ‡¶•‡¶æ‡¶ï‡ßÅ‡¶®",
        heroTitle: "Shohoz Bazar ‡¶è ‡¶∏‡ßç‡¶¨‡¶æ‡¶ó‡¶§‡¶Æ",
        heroSubtitle: "‡¶™‡¶£‡ßç‡¶Ø ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶® ‡¶è‡¶¨‡¶Ç Messenger ‡¶¶‡¶ø‡ßü‡ßá ‡¶¶‡ßç‡¶∞‡ßÅ‡¶§ ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®",
        shopNow: "‡¶è‡¶ñ‡¶®‡¶á ‡¶ï‡¶ø‡¶®‡ßÅ‡¶®",
        searchPlaceholder: "‡¶™‡¶£‡ßç‡¶Ø, ‡¶¨‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°, ‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶ó‡¶∞‡¶ø ‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßÅ‡¶®‚Ä¶",
        topDeals: "‡¶∏‡ßá‡¶∞‡¶æ ‡¶Ö‡¶´‡¶æ‡¶∞",
        wishlist: "‡¶á‡¶ö‡ßç‡¶õ‡ßá‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ",
        cart: "‡¶ï‡¶æ‡¶∞‡ßç‡¶ü",
        home: "‡¶π‡ßã‡¶Æ",
        shop: "‡¶∂‡¶™",
        allProducts: "‡¶∏‡¶¨ ‡¶™‡¶£‡ßç‡¶Ø",
        productsFound: "‡¶ü‡¶ø ‡¶™‡¶£‡ßç‡¶Ø ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶ó‡ßá‡¶õ‡ßá",
        addToCart: "‡¶ï‡¶æ‡¶∞‡ßç‡¶ü‡ßá ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®",
        viewDetails: "‡¶°‡¶ø‡¶ü‡ßá‡¶á‡¶≤‡¶∏",
        inStock: "‡¶∏‡ßç‡¶ü‡¶ï‡ßá ‡¶Ü‡¶õ‡ßá",
        outOfStock: "‡¶∏‡ßç‡¶ü‡¶ï ‡¶®‡ßá‡¶á",
        onlyLeft: "‡¶Ö‡¶¨‡¶∂‡¶ø‡¶∑‡ßç‡¶ü",
        delivery: "‡¶°‡ßá‡¶≤‡¶ø‡¶≠‡¶æ‡¶∞‡¶ø",
        reviews: "‡¶∞‡¶ø‡¶≠‡¶ø‡¶â",
        subtotal: "‡¶∏‡¶æ‡¶¨‡¶ü‡ßã‡¶ü‡¶æ‡¶≤",
        deliveryFee: "‡¶°‡ßá‡¶≤‡¶ø‡¶≠‡¶æ‡¶∞‡¶ø ‡¶ö‡¶æ‡¶∞‡ßç‡¶ú",
        free: "‡¶´‡ßç‡¶∞‡¶ø",
        total: "‡¶Æ‡ßã‡¶ü",
        coupon: "‡¶ï‡ßÅ‡¶™‡¶®",
        apply: "‡¶™‡ßç‡¶∞‡ßü‡ßã‡¶ó",
        continueShopping: "‡¶∂‡¶™‡¶ø‡¶Ç ‡¶ö‡¶æ‡¶≤‡¶ø‡ßü‡ßá ‡¶Ø‡¶æ‡¶®",
        emptyCartTitle: "‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ï‡¶æ‡¶∞‡ßç‡¶ü ‡¶ñ‡¶æ‡¶≤‡¶ø",
        emptyCartSubtitle: "‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡¶§‡ßá ‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶™‡¶£‡ßç‡¶Ø ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®!",
        startShopping: "‡¶∂‡¶™‡¶ø‡¶Ç ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶®",
        messengerCheckout: "Messenger ‡¶¶‡¶ø‡ßü‡ßá ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®",
        copied: "‡¶ï‡¶™‡¶ø ‡¶π‡ßü‡ßá‡¶õ‡ßá! Messenger ‡¶ñ‡ßÅ‡¶≤‡ßá‡¶õ‡ßá",
        openMessenger: "Messenger ‡¶ñ‡ßÅ‡¶≤‡ßÅ‡¶®",
        loading: "‡¶™‡¶£‡ßç‡¶Ø ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá‚Ä¶",
        loadFail: "‡¶™‡¶£‡ßç‡¶Ø ‡¶≤‡ßã‡¶° ‡¶π‡ßü‡¶®‡¶ø‡•§ /data/products.json ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®",
        orderCreated: "‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶§‡ßà‡¶∞‡¶ø ‡¶π‡ßü‡ßá‡¶õ‡ßá!",
        orderMsg: "‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü ‡¶ï‡¶™‡¶ø ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§ Messenger ‡¶è ‡¶™‡ßá‡¶∏‡ßç‡¶ü ‡¶ï‡¶∞‡ßá ‡¶ï‡¶®‡¶´‡¶æ‡¶∞‡ßç‡¶Æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§",
        copyOrder: "‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü ‡¶ï‡¶™‡¶ø",
        backHome: "‡¶π‡ßã‡¶Æ‡ßá ‡¶´‡¶ø‡¶∞‡ßá ‡¶Ø‡¶æ‡¶®",
        policies: "‡¶®‡ßÄ‡¶§‡¶ø‡¶Æ‡¶æ‡¶≤‡¶æ",
        quickLinks: "‡¶≤‡¶ø‡¶Ç‡¶ï",
        about: "‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶∏‡¶Æ‡ßç‡¶™‡¶∞‡ßç‡¶ï‡ßá",
        contact: "‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó",
        faq: "‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®‡ßã‡¶§‡ßç‡¶§‡¶∞",
        returnRefund: "‡¶∞‡¶ø‡¶ü‡¶æ‡¶∞‡ßç‡¶® ‡¶ì ‡¶∞‡¶ø‡¶´‡¶æ‡¶®‡ßç‡¶°",
        privacy: "‡¶™‡ßç‡¶∞‡¶æ‡¶á‡¶≠‡ßá‡¶∏‡¶ø",
        terms: "‡¶∂‡¶∞‡ßç‡¶§‡¶æ‡¶¨‡¶≤‡ßÄ",
        support: "‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü",
        clear: "‡¶∞‡¶ø‡¶∏‡ßá‡¶ü",
        sortBy: "‡¶∏‡¶æ‡¶ú‡¶æ‡¶®",
        sortPopular: "‡¶ú‡¶®‡¶™‡ßç‡¶∞‡¶ø‡ßü",
        sortLowHigh: "‡¶¶‡¶æ‡¶Æ: ‡¶ï‡¶Æ ‚Üí ‡¶¨‡ßá‡¶∂‡¶ø",
        sortHighLow: "‡¶¶‡¶æ‡¶Æ: ‡¶¨‡ßá‡¶∂‡¶ø ‚Üí ‡¶ï‡¶Æ",
        filterPrice: "‡¶¶‡¶æ‡¶Æ‡ßá‡¶∞ ‡¶∏‡ßÄ‡¶Æ‡¶æ",
        freeShipHint: "‡¶´‡ßç‡¶∞‡¶ø ‡¶°‡ßá‡¶≤‡¶ø‡¶≠‡¶æ‡¶∞‡¶ø‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ü‡¶∞ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®",
      }
    };

    function ShohozBazarApp() {
      const [lang, setLang] = useState("bn");
      const t = TRANSLATIONS[lang];

      const [products, setProducts] = useState([]);
      const [loading, setLoading] = useState(true);
      const [loadError, setLoadError] = useState("");

      const [cart, setCart] = useState([]);
      const [wishlist, setWishlist] = useState([]);
      const [page, setPage] = useState("home");
      const [selectedProduct, setSelectedProduct] = useState(null);

      const [searchQuery, setSearchQuery] = useState("");
      const [selectedCategory, setSelectedCategory] = useState("all");
      const [sort, setSort] = useState("popular");
      const [minPrice, setMinPrice] = useState("");
      const [maxPrice, setMaxPrice] = useState("");

      const [coupon, setCoupon] = useState("");
      const [appliedCoupon, setAppliedCoupon] = useState(null);

      const [order, setOrder] = useState(null);
      const [copied, setCopied] = useState(false);

      useEffect(() => {
        (async () => {
          try {
            setLoading(true);
            setLoadError("");
            const res = await fetch("/data/products.json", { cache: "no-store" });
            if (!res.ok) throw new Error("HTTP " + res.status);
            const data = await res.json();
            const list = Array.isArray(data) ? data : (data.products || []);
            setProducts(list);
          } catch (e) {
            console.error(e);
            setLoadError(t.loadFail);
          } finally {
            setLoading(false);
          }
        })();
      }, [t.loadFail]);

      const categories = useMemo(() => ([
        { id: 'all',        name: {en:'All', bn:'‡¶∏‡¶¨'}, icon: 'üõçÔ∏è' },
        { id: 'groceries',  name: {en:'Groceries', bn:'‡¶ó‡ßç‡¶∞‡ßã‡¶∏‡¶æ‡¶∞‡¶ø'}, icon: 'üõí' },
        { id: 'fashion',    name: {en:'Fashion', bn:'‡¶´‡ßç‡¶Ø‡¶æ‡¶∂‡¶®'}, icon: 'üëó' },
        { id: 'electronics',name: {en:'Electronics', bn:'‡¶á‡¶≤‡ßá‡¶ï‡¶ü‡ßç‡¶∞‡¶®‡¶ø‡¶ï‡ßç‡¶∏'}, icon: 'üì±' },
        { id: 'beauty',     name: {en:'Beauty', bn:'‡¶¨‡¶ø‡¶â‡¶ü‡¶ø'}, icon: 'üíÖ' },
        { id: 'home',       name: {en:'Home & Kitchen', bn:'‡¶π‡ßã‡¶Æ & ‡¶ï‡¶ø‡¶ö‡ßá‡¶®'}, icon: 'üè†' },
        { id: 'baby',       name: {en:'Baby & Kids', bn:'‡¶¨‡ßá‡¶¨‡¶ø & ‡¶ï‡¶ø‡¶°‡¶∏'}, icon: 'üß∏' },
        { id: 'stationery', name: {en:'Stationery', bn:'‡¶∏‡ßç‡¶ü‡ßá‡¶∂‡¶®‡¶æ‡¶∞‡¶ø'}, icon: '‚úèÔ∏è' },
        { id: 'health',     name: {en:'Health', bn:'‡¶π‡ßá‡¶≤‡¶•'}, icon: 'üè•' },
      ]), []);

      const addToCart = (p, qty=1) => {
        if ((p.stock ?? 0) <= 0) return;
        setCart(prev => {
          const existing = prev.find(i => i.id === p.id);
          const maxStock = p.stock ?? 9999;
          const addQty = Math.max(1, Math.min(qty, maxStock));
          if (existing) {
            const newQty = Math.min(existing.quantity + addQty, maxStock);
            return prev.map(i => i.id === p.id ? {...i, quantity: newQty} : i);
          }
          return [...prev, {...p, quantity: addQty}];
        });
      };

      const removeFromCart = (id) => setCart(prev => prev.filter(i => i.id !== id));

      const updateQuantity = (id, change) => {
        setCart(prev => prev
          .map(i => {
            if (i.id !== id) return i;
            const maxStock = i.stock ?? 9999;
            const q = Math.min(Math.max(i.quantity + change, 0), maxStock);
            return {...i, quantity: q};
          })
          .filter(i => i.quantity > 0)
        );
      };

      const toggleWishlist = (p) => {
        setWishlist(prev => prev.some(x => x.id === p.id) ? prev.filter(x => x.id !== p.id) : [...prev, p]);
      };

      const cartTotal = useMemo(() => cart.reduce((s, i) => s + (i.price || 0) * i.quantity, 0), [cart]);
      const cartCount = useMemo(() => cart.reduce((s, i) => s + i.quantity, 0), [cart]);

      const deliveryFee = cartTotal >= BRAND.freeShipThreshold || cartTotal === 0 ? 0 : BRAND.deliveryFee;

      const couponDiscount = useMemo(() => {
        if (!appliedCoupon) return 0;
        if (appliedCoupon.code === "SB10") return Math.floor(cartTotal * 0.10);
        if (appliedCoupon.code === "SHIPFREE") return deliveryFee;
        return 0;
      }, [appliedCoupon, cartTotal, deliveryFee]);

      const grandTotal = Math.max(0, cartTotal + deliveryFee - couponDiscount);

      const filteredProducts = useMemo(() => {
        let list = [...products];

        if (selectedCategory !== "all") list = list.filter(p => p.category === selectedCategory);

        const q = (searchQuery || "").trim().toLowerCase();
        if (q) list = list.filter(p => ((p.name_en || "") + " " + (p.name_bn || "")).toLowerCase().includes(q));

        const min = minPrice === "" ? null : Number(minPrice);
        const max = maxPrice === "" ? null : Number(maxPrice);
        if (min != null && !Number.isNaN(min)) list = list.filter(p => (p.price || 0) >= min);
        if (max != null && !Number.isNaN(max)) list = list.filter(p => (p.price || 0) <= max);

        if (sort === "lowhigh") list.sort((a,b) => (a.price||0) - (b.price||0));
        if (sort === "highlow") list.sort((a,b) => (b.price||0) - (a.price||0));
        if (sort === "popular") list.sort((a,b) => (b.reviews||0) - (a.reviews||0));

        return list;
      }, [products, selectedCategory, searchQuery, minPrice, maxPrice, sort]);

      const applyCoupon = () => {
        const code = (coupon || "").trim().toUpperCase();
        if (!code) return;
        if (code === "SB10" || code === "SHIPFREE") setAppliedCoupon({ code });
        else setAppliedCoupon({ code: "INVALID" });
      };

      const clearFilters = () => {
        setSort("popular");
        setMinPrice(""); setMaxPrice("");
        setSearchQuery(""); setSelectedCategory("all");
      };

      const copyText = async (text) => {
        try {
          await navigator.clipboard.writeText(text);
          return true;
        } catch {
          const ta = document.createElement("textarea");
          ta.value = text;
          document.body.appendChild(ta);
          ta.select();
          try { document.execCommand("copy"); } catch {}
          document.body.removeChild(ta);
          return true;
        }
      };

      const buildOrderMessage = (orderId) => {
        const lines = [];
        lines.push(`Shohoz Bazar Order`);
        lines.push(`Page: m.me/${BRAND.pageId}`);
        lines.push(`Order ID: ${orderId}`);
        lines.push(``);
        lines.push(`Items:`);
        cart.forEach(it => {
          lines.push(`- ${it.name_en || ""} / ${it.name_bn || ""} (ID: ${it.id}) x${it.quantity} = ${it.price * it.quantity}`);
        });
        lines.push(``);
        lines.push(`Subtotal: ${cartTotal}`);
        lines.push(`Delivery: ${deliveryFee}`);
        if (couponDiscount > 0) lines.push(`Discount: -${couponDiscount}`);
        lines.push(`Grand Total: ${grandTotal}`);
        lines.push(``);
        lines.push(`Customer Name:`);
        lines.push(`Phone:`);
        lines.push(`Address:`);
        lines.push(`Payment: COD / bKash / Nagad`);
        return lines.join("\n");
      };

      const messengerCheckout = async () => {
        if (cart.length === 0) return;
        const id = genOrderId();
        const message = buildOrderMessage(id);
        await copyText(message);

        setCopied(true);
        setTimeout(() => setCopied(false), 1500);

        setOrder({ id, message, total: grandTotal, items: cart });
        window.open(BRAND.messengerLink, "_blank");
        setPage("track");
      };

      const ProductImage = ({ src, alt }) => {
        if (!src) return <div className="w-full h-full flex items-center justify-center text-5xl">üõçÔ∏è</div>;
        return <img src={src} alt={alt || ""} className="w-full h-full object-cover" loading="lazy" />;
      };

      const goProduct = (p) => { setSelectedProduct(p); setPage("product"); };

      const Header = () => (
        <header className="sticky top-0 z-50 bg-white/90 backdrop-blur border-b">
          <div className="bg-emerald-700 text-white py-2 px-4 text-sm text-center">
            üí¨ Messenger Checkout ‚Ä¢ Free Delivery over {formatBDT(BRAND.freeShipThreshold)}
          </div>

          <div className="container mx-auto px-4 py-4">
            <div className="flex items-center justify-between gap-4">
              <div className="flex items-center gap-3 cursor-pointer" onClick={() => { setPage("home"); setSelectedProduct(null); }}>
                <div className="w-11 h-11 rounded-2xl overflow-hidden bg-white border flex items-center justify-center shadow-sm">
                  <img src={BRAND.logo} alt={BRAND.name} className="w-full h-full object-contain" />
                </div>
                <div>
                  <div className="font-extrabold text-lg text-gray-900 leading-tight">{BRAND.name}</div>
                  <div className="text-xs text-gray-500 hidden sm:block">{t.tagline}</div>
                </div>
              </div>

              <div className="flex-1 max-w-2xl hidden md:block">
                <div className="relative">
                  <input
                    type="text"
                    placeholder={t.searchPlaceholder}
                    className="w-full px-4 py-3 pr-12 border border-gray-200 rounded-2xl focus:border-emerald-500 focus:outline-none bg-white"
                    value={searchQuery}
                    onChange={(e) => { setSearchQuery(e.target.value); setPage("shop"); }}
                  />
                  <span className="absolute right-4 top-3.5 text-gray-400">üîç</span>
                </div>
              </div>

              <div className="flex items-center gap-2">
                <button
                  className="px-3 py-2 rounded-xl border border-gray-200 hover:border-emerald-400 bg-white"
                  onClick={() => setLang(prev => prev === "bn" ? "en" : "bn")}
                  title="Toggle language"
                >
                  <span className="text-sm font-bold">{lang === "bn" ? "EN" : "BN"}</span>
                </button>

                <button className="relative px-3 py-2 rounded-xl hover:bg-gray-100" onClick={() => setPage("wishlist")}>
                  <span className="text-xl">‚ù§Ô∏è</span>
                  {wishlist.length > 0 && (
                    <span className="absolute -top-1 -right-1 bg-red-500 text-white text-xs w-5 h-5 rounded-full flex items-center justify-center">
                      {wishlist.length}
                    </span>
                  )}
                </button>

                <button className="relative px-3 py-2 rounded-xl hover:bg-gray-100" onClick={() => setPage("cart")}>
                  <span className="text-xl">üõí</span>
                  {cartCount > 0 && (
                    <span className="absolute -top-1 -right-1 bg-emerald-600 text-white text-xs w-5 h-5 rounded-full flex items-center justify-center">
                      {cartCount}
                    </span>
                  )}
                </button>
              </div>
            </div>

            <div className="mt-3 md:hidden">
              <div className="relative">
                <input
                  type="text"
                  placeholder={t.searchPlaceholder}
                  className="w-full px-4 py-2 pr-10 border border-gray-200 rounded-2xl focus:border-emerald-500 focus:outline-none bg-white"
                  value={searchQuery}
                  onChange={(e) => { setSearchQuery(e.target.value); setPage("shop"); }}
                />
                <span className="absolute right-3 top-2.5 text-gray-400">üîç</span>
              </div>
            </div>
          </div>

          <div className="border-t overflow-x-auto bg-white">
            <div className="container mx-auto px-4">
              <div className="flex gap-2 py-3 whitespace-nowrap">
                {categories.map(cat => (
                  <button
                    key={cat.id}
                    onClick={() => { setSelectedCategory(cat.id); setPage("shop"); }}
                    className={`flex items-center gap-2 px-4 py-2 rounded-full transition font-semibold ${
                      selectedCategory === cat.id ? "bg-emerald-700 text-white" : "bg-gray-100 hover:bg-gray-200 text-gray-800"
                    }`}
                  >
                    <span>{cat.icon}</span>
                    <span className="text-sm">{cat.name[lang]}</span>
                  </button>
                ))}
              </div>
            </div>
          </div>
        </header>
      );

      const ProductCard = ({ product }) => {
        const isWished = wishlist.some(w => w.id === product.id);
        const out = (product.stock ?? 0) <= 0;

        const title = lang === "bn"
          ? (product.name_bn || product.name_en || "")
          : (product.name_en || product.name_bn || "");

        return (
          <div className={`bg-white rounded-2xl shadow-sm hover:shadow-md transition overflow-hidden border ${out ? "opacity-80" : ""}`}>
            <div className="relative aspect-square bg-gray-100 overflow-hidden cursor-pointer" onClick={() => goProduct(product)}>
              <ProductImage src={product.image} alt={title} />

              {product.discount > 0 && !out && (
                <div className="absolute top-3 left-3 bg-red-500 text-white px-2 py-1 rounded-xl text-xs font-extrabold">
                  -{product.discount}%
                </div>
              )}

              {out && (
                <div className="absolute inset-0 bg-black/45 flex items-center justify-center">
                  <div className="bg-white text-gray-900 px-4 py-2 rounded-2xl font-extrabold">{t.outOfStock}</div>
                </div>
              )}

              <button
                onClick={(e) => { e.stopPropagation(); toggleWishlist(product); }}
                className="absolute top-3 right-3 p-2 bg-white/90 rounded-full shadow hover:bg-white"
                aria-label="wishlist"
              >
                <span className={isWished ? "text-red-500" : ""}>{isWished ? "‚ù§Ô∏è" : "ü§ç"}</span>
              </button>
            </div>

            <div className="p-4">
              <h3 className="font-extrabold text-sm line-clamp-2 cursor-pointer hover:text-emerald-700" onClick={() => goProduct(product)}>
                {title}
              </h3>

              <div className="flex items-center gap-2 mt-2 text-sm text-gray-700">
                <span>‚≠ê</span>
                <span className="font-bold">{product.rating ?? 4.5}</span>
                <span className="text-gray-500">({product.reviews ?? 0} {t.reviews})</span>
              </div>

              <div className="flex items-center gap-2 mt-2">
                <span className="text-lg font-extrabold text-emerald-700">{formatBDT(product.price)}</span>
                {product.oldPrice ? <span className="text-sm text-gray-400 line-through">{formatBDT(product.oldPrice)}</span> : null}
              </div>

              <div className="text-xs text-gray-600 mt-2">
                üöö {t.delivery}: {product.delivery || "1-2 days"}
              </div>

              {!out && (product.stock ?? 0) < 20 && (
                <div className="text-xs text-red-600 mt-2">‚ö†Ô∏è {t.onlyLeft}: {product.stock}</div>
              )}

              <div className="mt-3 grid grid-cols-2 gap-2">
                <button
                  disabled={out}
                  onClick={() => addToCart(product, 1)}
                  className={`w-full py-2 rounded-xl font-extrabold ${
                    out ? "bg-gray-200 text-gray-500 cursor-not-allowed" : "bg-orange-500 hover:bg-orange-600 text-white"
                  }`}
                >
                  {t.addToCart}
                </button>

                <button
                  onClick={() => goProduct(product)}
                  className="w-full py-2 rounded-xl font-extrabold border border-gray-200 hover:border-emerald-400"
                >
                  {t.viewDetails}
                </button>
              </div>
            </div>
          </div>
        );
      };

      const HomePage = () => (
        <div>
          <div className="bg-gradient-to-br from-emerald-700 via-emerald-600 to-emerald-500 text-white">
            <div className="container mx-auto px-4 py-14 md:py-20">
              <div className="max-w-3xl">
                <div className="inline-flex items-center gap-2 bg-white/15 border border-white/20 px-4 py-2 rounded-full text-sm font-bold mb-5">
                  üí¨ Messenger Checkout ‚Ä¢ No payment gateway
                </div>
                <h1 className="text-4xl md:text-5xl font-black leading-tight">{t.heroTitle}</h1>
                <p className="text-white/90 text-lg md:text-xl mt-4">{t.heroSubtitle}</p>
                <div className="mt-8 flex gap-3 flex-wrap">
                  <button
                    onClick={() => setPage("shop")}
                    className="bg-orange-500 hover:bg-orange-600 text-white px-7 py-3 rounded-2xl text-lg font-black transition"
                  >
                    {t.shopNow}
                  </button>
                  <a
                    href={BRAND.messengerLink}
                    target="_blank"
                    className="bg-white/15 hover:bg-white/20 border border-white/30 px-7 py-3 rounded-2xl text-lg font-black"
                  >
                    m.me/{BRAND.pageId}
                  </a>
                </div>
              </div>
            </div>
          </div>

          <div className="container mx-auto px-4 py-10">
            <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
              {[
                { icon: "üí¨", title: "Messenger Checkout", sub: "Copy & paste order instantly" },
                { icon: "üßë‚Äçüíª", title: "Free Admin Panel", sub: "/admin with Decap CMS" },
                { icon: "üõçÔ∏è", title: "Dynamic Products", sub: "Manage stock & price anytime" },
                { icon: "üöö", title: "Smart Delivery", sub: "Free shipping threshold" },
              ].map((b, i) => (
                <div key={i} className="bg-white p-6 rounded-2xl shadow-sm border">
                  <div className="text-4xl">{b.icon}</div>
                  <div className="mt-3 font-black text-gray-900">{b.title}</div>
                  <div className="text-sm text-gray-600 mt-1">{b.sub}</div>
                </div>
              ))}
            </div>
          </div>

          <div className="container mx-auto px-4 pb-12">
            <div className="flex items-center justify-between gap-4 mb-6">
              <h2 className="text-2xl md:text-3xl font-black">üî• {t.topDeals}</h2>
              <button className="text-emerald-700 font-black hover:underline" onClick={() => setPage("shop")}>
                {t.shop} ‚Üí
              </button>
            </div>

            {loading ? (
              <div className="bg-white rounded-2xl p-10 text-center shadow-sm border">{t.loading}</div>
            ) : loadError ? (
              <div className="bg-white rounded-2xl p-10 text-center shadow-sm border text-red-600">{loadError}</div>
            ) : (
              <div className="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4">
                {products.slice(0, 6).map(p => <ProductCard key={p.id} product={p} />)}
              </div>
            )}
          </div>
        </div>
      );

      const ShopPage = () => (
        <div className="container mx-auto px-4 py-8">
          <div className="flex flex-col lg:flex-row lg:items-end lg:justify-between gap-4 mb-6">
            <div>
              <h1 className="text-2xl md:text-3xl font-black">{t.allProducts}</h1>
              <p className="text-gray-600 mt-1">{filteredProducts.length} {t.productsFound}</p>
            </div>

            <div className="flex flex-wrap gap-3 items-center">
              <div className="flex items-center gap-2">
                <span className="text-sm text-gray-600 font-bold">{t.sortBy}</span>
                <select value={sort} onChange={(e) => setSort(e.target.value)} className="border rounded-xl px-3 py-2 bg-white">
                  <option value="popular">{t.sortPopular}</option>
                  <option value="lowhigh">{t.sortLowHigh}</option>
                  <option value="highlow">{t.sortHighLow}</option>
                </select>
              </div>

              <div className="flex items-center gap-2">
                <span className="text-sm text-gray-600 font-bold">{t.filterPrice}</span>
                <input type="number" value={minPrice} onChange={(e) => setMinPrice(e.target.value)} placeholder="min" className="w-24 border rounded-xl px-3 py-2" />
                <input type="number" value={maxPrice} onChange={(e) => setMaxPrice(e.target.value)} placeholder="max" className="w-24 border rounded-xl px-3 py-2" />
              </div>

              <button onClick={clearFilters} className="px-4 py-2 rounded-xl border font-black hover:border-emerald-400">
                {t.clear}
              </button>
            </div>
          </div>

          {loading ? (
            <div className="bg-white rounded-2xl p-10 text-center shadow-sm border">{t.loading}</div>
          ) : loadError ? (
            <div className="bg-white rounded-2xl p-10 text-center shadow-sm border text-red-600">{loadError}</div>
          ) : (
            <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4">
              {filteredProducts.map(p => <ProductCard key={p.id} product={p} />)}
            </div>
          )}
        </div>
      );

      const ProductPage = () => {
        const p = selectedProduct;
        if (!p) return (
          <div className="container mx-auto px-4 py-12 text-center">
            <div className="text-6xl mb-4">üòÖ</div>
            <p className="font-bold">No product selected.</p>
            <button className="mt-4 bg-emerald-700 hover:bg-emerald-800 text-white px-6 py-3 rounded-2xl font-black"
              onClick={() => setPage("shop")}
            >
              {t.shop}
            </button>
          </div>
        );

        const out = (p.stock ?? 0) <= 0;
        const title = lang === "bn" ? (p.name_bn || p.name_en || "") : (p.name_en || p.name_bn || "");
        const desc = lang === "bn" ? (p.description_bn || "") : (p.description_en || "");

        return (
          <div className="container mx-auto px-4 py-8">
            <button className="mb-5 text-emerald-700 font-black hover:underline" onClick={() => setPage("shop")}>
              ‚Üê {t.shop}
            </button>

            <div className="grid md:grid-cols-2 gap-8">
              <div className="bg-white rounded-3xl shadow-sm border overflow-hidden aspect-square">
                <ProductImage src={p.image} alt={title} />
              </div>

              <div className="bg-white rounded-3xl shadow-sm border p-6">
                <div className="flex items-start justify-between gap-3">
                  <h1 className="text-2xl md:text-3xl font-black">{title}</h1>
                  <button
                    onClick={() => toggleWishlist(p)}
                    className="px-3 py-2 rounded-2xl border hover:border-emerald-400"
                    title="Wishlist"
                  >
                    {wishlist.some(w => w.id === p.id) ? "‚ù§Ô∏è" : "ü§ç"}
                  </button>
                </div>

                <div className="flex items-center gap-2 mt-3 text-gray-700">
                  <span>‚≠ê</span>
                  <span className="font-black">{p.rating ?? 4.5}</span>
                  <span className="text-sm text-gray-500">({p.reviews ?? 0} {t.reviews})</span>
                </div>

                <div className="flex items-center gap-3 mt-4">
                  <span className="text-3xl font-black text-emerald-700">{formatBDT(p.price)}</span>
                  {p.oldPrice ? <span className="text-gray-400 line-through">{formatBDT(p.oldPrice)}</span> : null}
                  {p.discount > 0 && !out ? (
                    <span className="bg-red-50 text-red-600 border border-red-200 px-3 py-1 rounded-full font-black text-sm">
                      -{p.discount}%
                    </span>
                  ) : null}
                </div>

                <div className="mt-4 text-sm text-gray-700">
                  <div className="flex items-center gap-2">
                    {out ? "‚õî" : "‚úÖ"} <span className="font-bold">{out ? t.outOfStock : `${t.inStock}: ${p.stock}`}</span>
                  </div>
                  <div className="flex items-center gap-2 mt-1">üöö <span>{t.delivery}: {p.delivery || "1-2 days"}</span></div>
                  <div className="flex items-center gap-2 mt-1">üÜî <span>ID: {p.id}</span></div>
                </div>

                <div className="mt-6 flex gap-3">
                  <button
                    disabled={out}
                    onClick={() => addToCart(p, 1)}
                    className={`flex-1 py-3 rounded-2xl font-black ${
                      out ? "bg-gray-200 text-gray-500 cursor-not-allowed" : "bg-orange-500 hover:bg-orange-600 text-white"
                    }`}
                  >
                    {t.addToCart}
                  </button>
                  <button
                    disabled={out}
                    onClick={() => { addToCart(p, 1); setPage("cart"); }}
                    className={`flex-1 py-3 rounded-2xl font-black ${
                      out ? "bg-gray-200 text-gray-500 cursor-not-allowed" : "bg-emerald-700 hover:bg-emerald-800 text-white"
                    }`}
                  >
                    {t.cart}
                  </button>
                </div>

                {desc ? (
                  <div className="mt-6 border-t pt-4">
                    <div className="font-black mb-2">Details</div>
                    <p className="text-sm text-gray-700 leading-relaxed">{desc}</p>
                  </div>
                ) : null}
              </div>
            </div>
          </div>
        );
      };

      const CartPage = () => (
        <div className="container mx-auto px-4 py-8">
          <div className="flex items-center justify-between flex-wrap gap-3">
            <h1 className="text-2xl md:text-3xl font-black">{t.cart} ({cartCount})</h1>
            <button className="text-emerald-700 font-black hover:underline" onClick={() => setPage("shop")}>
              {t.continueShopping} ‚Üí
            </button>
          </div>

          {cart.length === 0 ? (
            <div className="text-center py-16">
              <div className="text-8xl mb-4">üõí</div>
              <h2 className="text-2xl font-black mb-2">{t.emptyCartTitle}</h2>
              <p className="text-gray-600 mb-6">{t.emptyCartSubtitle}</p>
              <button onClick={() => setPage("shop")} className="bg-emerald-700 hover:bg-emerald-800 text-white px-8 py-3 rounded-2xl font-black">
                {t.startShopping}
              </button>
            </div>
          ) : (
            <div className="grid lg:grid-cols-3 gap-8 mt-6">
              <div className="lg:col-span-2 space-y-4">
                {cart.map(item => (
                  <div key={item.id} className="bg-white rounded-3xl shadow-sm border p-4 flex gap-4">
                    <div className="w-24 h-24 bg-gray-100 rounded-2xl overflow-hidden flex-shrink-0 cursor-pointer" onClick={() => goProduct(item)}>
                      <ProductImage src={item.image} alt={item.name_en} />
                    </div>

                    <div className="flex-1">
                      <div className="font-black cursor-pointer hover:text-emerald-700" onClick={() => goProduct(item)}>
                        {lang === "bn" ? (item.name_bn || item.name_en) : (item.name_en || item.name_bn)}
                      </div>
                      <div className="flex items-center gap-2 mt-1">
                        <span className="text-lg font-black text-emerald-700">{formatBDT(item.price)}</span>
                        {item.oldPrice ? <span className="text-sm text-gray-400 line-through">{formatBDT(item.oldPrice)}</span> : null}
                      </div>
                      <div className="text-xs text-gray-600 mt-1">üÜî ID: {item.id}</div>
                    </div>

                    <div className="flex flex-col items-end justify-between">
                      <button onClick={() => removeFromCart(item.id)} className="text-red-500 hover:text-red-700 text-xl">‚úï</button>

                      <div className="flex items-center gap-2 border rounded-2xl">
                        <button onClick={() => updateQuantity(item.id, -1)} className="p-2 hover:bg-gray-100 rounded-l-2xl">‚àí</button>
                        <span className="px-4 font-black">{item.quantity}</span>
                        <button onClick={() => updateQuantity(item.id, 1)} className="p-2 hover:bg-gray-100 rounded-r-2xl">+</button>
                      </div>
                    </div>
                  </div>
                ))}
              </div>

              <div className="lg:col-span-1">
                <div className="bg-white rounded-3xl shadow-sm border p-6 sticky top-28">
                  <div className="text-xl font-black mb-4">Order Summary</div>

                  <div className="space-y-3 text-sm text-gray-700 mb-4">
                    <div className="flex justify-between"><span className="font-bold">{t.subtotal}</span><span className="font-black">{formatBDT(cartTotal)}</span></div>
                    <div className="flex justify-between"><span className="font-bold">{t.deliveryFee}</span><span className="font-black">{deliveryFee === 0 ? t.free : formatBDT(deliveryFee)}</span></div>

                    <div>
                      <div className="flex gap-2">
                        <input value={coupon} onChange={(e) => setCoupon(e.target.value)} placeholder={`${t.coupon} (SB10 / SHIPFREE)`} className="flex-1 border rounded-2xl px-3 py-2" />
                        <button onClick={applyCoupon} className="px-4 py-2 rounded-2xl bg-gray-900 text-white font-black">{t.apply}</button>
                      </div>
                      {appliedCoupon && appliedCoupon.code === "INVALID" ? (
                        <div className="mt-2 text-red-600 font-bold">Invalid coupon</div>
                      ) : null}
                      {appliedCoupon && appliedCoupon.code !== "INVALID" ? (
                        <div className="mt-2 text-emerald-700 font-bold">Applied: {appliedCoupon.code} (‚àí{formatBDT(couponDiscount)})</div>
                      ) : null}
                    </div>

                    {cartTotal < BRAND.freeShipThreshold ? (
                      <div className="bg-orange-50 border border-orange-200 rounded-2xl p-3 font-bold">
                        üí∞ {t.freeShipHint}: {formatBDT(BRAND.freeShipThreshold - cartTotal)}
                      </div>
                    ) : null}
                  </div>

                  <div className="border-t pt-4 mb-4">
                    <div className="flex justify-between text-lg font-black">
                      <span>{t.total}</span>
                      <span className="text-emerald-700">{formatBDT(grandTotal)}</span>
                    </div>
                  </div>

                  <button
                    onClick={messengerCheckout}
                    className="w-full bg-emerald-700 hover:bg-emerald-800 text-white py-3 rounded-2xl font-black text-lg transition"
                  >
                    {copied ? t.copied : t.messengerCheckout}
                  </button>

                  <a href={BRAND.messengerLink} target="_blank" className="block text-center mt-3 text-emerald-700 font-black hover:underline">
                    {t.openMessenger} ‚Üí
                  </a>
                </div>
              </div>
            </div>
          )}
        </div>
      );

      const WishlistPage = () => (
        <div className="container mx-auto px-4 py-8">
          <div className="flex items-center justify-between flex-wrap gap-3">
            <h1 className="text-2xl md:text-3xl font-black">{t.wishlist} ({wishlist.length})</h1>
            <button className="text-emerald-700 font-black hover:underline" onClick={() => setPage("shop")}>
              {t.shop} ‚Üí
            </button>
          </div>

          {wishlist.length === 0 ? (
            <div className="text-center py-16">
              <div className="text-8xl mb-4">‚ù§Ô∏è</div>
              <h2 className="text-2xl font-black mb-2">Your wishlist is empty</h2>
              <p className="text-gray-600 mb-6">Save your favorite items here!</p>
              <button onClick={() => setPage("shop")} className="bg-emerald-700 hover:bg-emerald-800 text-white px-8 py-3 rounded-2xl font-black">
                {t.startShopping}
              </button>
            </div>
          ) : (
            <div className="mt-6 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4">
              {wishlist.map(p => <ProductCard key={p.id} product={p} />)}
            </div>
          )}
        </div>
      );

      const TrackPage = () => (
        <div className="container mx-auto px-4 py-8">
          <div className="flex items-center justify-between flex-wrap gap-3 mb-6">
            <h1 className="text-2xl md:text-3xl font-black">{t.orderCreated}</h1>
            <button className="text-emerald-700 font-black hover:underline" onClick={() => setPage("home")}>
              {t.backHome}
            </button>
          </div>

          {!order ? (
            <div className="bg-white rounded-3xl shadow-sm border p-8">
              <div className="text-gray-600">No recent order.</div>
            </div>
          ) : (
            <div className="grid lg:grid-cols-2 gap-8">
              <div className="bg-white rounded-3xl shadow-sm border p-6">
                <div className="text-lg font-black mb-2">{t.orderMsg}</div>

                <div className="p-4 rounded-2xl bg-emerald-50 border border-emerald-100">
                  <div className="font-black">Order ID: {order.id}</div>
                  <div className="text-sm text-gray-600 mt-1">
                    Total: <span className="font-black">{formatBDT(order.total)}</span>
                  </div>
                </div>

                <div className="mt-4 flex gap-2 flex-wrap">
                  <button
                    className="px-4 py-2 rounded-2xl bg-gray-900 text-white font-black"
                    onClick={async () => {
                      await copyText(order.message);
                      setCopied(true);
                      setTimeout(() => setCopied(false), 1500);
                    }}
                  >
                    {copied ? t.copied : t.copyOrder}
                  </button>

                  <a href={BRAND.messengerLink} target="_blank" className="px-4 py-2 rounded-2xl bg-emerald-700 hover:bg-emerald-800 text-white font-black">
                    {t.openMessenger}
                  </a>
                </div>

                <textarea className="mt-4 w-full border rounded-2xl p-3 text-sm h-56" readOnly value={order.message}></textarea>
              </div>

              <div className="bg-white rounded-3xl shadow-sm border p-6">
                <div className="text-xl font-black mb-4">Cart Details</div>
                <div className="space-y-3 text-sm">
                  {order.items.map(i => (
                    <div key={i.id} className="flex justify-between gap-3 border-b pb-3">
                      <div className="flex-1">
                        <div className="font-black">{i.name_en || ""} / {i.name_bn || ""}</div>
                        <div className="text-gray-500">ID: {i.id} ‚Ä¢ Qty: {i.quantity}</div>
                      </div>
                      <div className="font-black">{formatBDT(i.price * i.quantity)}</div>
                    </div>
                  ))}
                </div>
              </div>
            </div>
          )}
        </div>
      );

      const Footer = () => (
        <footer className="bg-gray-950 text-white mt-16">
          <div className="container mx-auto px-4 py-12">
            <div className="grid md:grid-cols-4 gap-8">
              <div>
                <div className="flex items-center gap-3 mb-4">
                  <div className="w-11 h-11 rounded-2xl overflow-hidden bg-white border flex items-center justify-center">
                    <img src={BRAND.logo} alt={BRAND.name} className="w-full h-full object-contain" />
                  </div>
                  <div className="font-black text-lg">{BRAND.name}</div>
                </div>
                <div className="text-gray-300 text-sm leading-relaxed">
                  Mixed online marketplace for Bangladesh. Checkout via Messenger ‚Äî fast and simple.
                </div>

                <a href={BRAND.messengerLink} target="_blank"
                   className="inline-flex mt-4 bg-emerald-700 hover:bg-emerald-600 px-4 py-2 rounded-2xl font-black">
                  m.me/{BRAND.pageId}
                </a>
              </div>

              <div>
                <div className="font-black text-lg mb-4">{t.quickLinks}</div>
                <ul className="space-y-2 text-sm text-gray-300">
                  <li className="hover:text-white cursor-pointer">{t.about}</li>
                  <li className="hover:text-white cursor-pointer">{t.contact}</li>
                  <li className="hover:text-white cursor-pointer">{t.faq}</li>
                </ul>
              </div>

              <div>
                <div className="font-black text-lg mb-4">{t.policies}</div>
                <ul className="space-y-2 text-sm text-gray-300">
                  <li className="hover:text-white cursor-pointer">{t.returnRefund}</li>
                  <li className="hover:text-white cursor-pointer">{t.privacy}</li>
                  <li className="hover:text-white cursor-pointer">{t.terms}</li>
                </ul>
              </div>

              <div>
                <div className="font-black text-lg mb-4">{t.support}</div>
                <ul className="space-y-2 text-sm text-gray-300">
                  <li>üìû {BRAND.phone}</li>
                  <li>üìß {BRAND.email}</li>
                  <li>üìç {BRAND.address}</li>
                </ul>
              </div>
            </div>

            <div className="border-t border-white/10 mt-10 pt-6 text-center text-sm text-gray-400">
              ¬© 2025 Shohoz Bazar. All rights reserved.
            </div>
          </div>
        </footer>
      );

      const MobileBottomNav = () => (
        <div className="fixed bottom-0 left-0 right-0 bg-white border-t shadow-lg md:hidden z-50">
          <div className="grid grid-cols-3 gap-1 p-2">
            <button onClick={() => setPage("home")} className="flex flex-col items-center gap-1 py-2">
              <span className="text-xl">üè†</span><span className="text-xs font-bold">{t.home}</span>
            </button>
            <button onClick={() => setPage("shop")} className="flex flex-col items-center gap-1 py-2">
              <span className="text-xl">üõçÔ∏è</span><span className="text-xs font-bold">{t.shop}</span>
            </button>
            <button onClick={() => setPage("cart")} className="flex flex-col items-center gap-1 py-2 relative">
              <span className="text-xl">üõí</span><span className="text-xs font-bold">{t.cart}</span>
              {cartCount > 0 && (
                <span className="absolute top-1 right-6 bg-emerald-700 text-white text-xs w-5 h-5 rounded-full flex items-center justify-center">
                  {cartCount}
                </span>
              )}
            </button>
          </div>
        </div>
      );

      const Page = () => {
        if (page === "home") return <HomePage />;
        if (page === "shop") return <ShopPage />;
        if (page === "product") return <ProductPage />;
        if (page === "cart") return <CartPage />;
        if (page === "wishlist") return <WishlistPage />;
        if (page === "track") return <TrackPage />;
        return <HomePage />;
      };

      return (
        <div className="min-h-screen bg-gray-50">
          <Header />
          <main className="min-h-screen pb-20 md:pb-0">
            <Page />
          </main>
          <Footer />
          <MobileBottomNav />
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById("root"));
    root.render(<ShohozBazarApp />);
  </script>

  <!-- Redirect after Netlify Identity login -->
  <script>
    if (window.netlifyIdentity) {
      window.netlifyIdentity.on("init", user => {
        if (!user) {
          window.netlifyIdentity.on("login", () => {
            document.location.href = "/admin/";
          });
        }
      });
    }
  </script>
</body>
</html>
