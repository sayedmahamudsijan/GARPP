<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Shohoz Bazar ‚Äî Shop Easy, Live Easy</title>
  <meta name="description" content="Shohoz Bazar - Mixed online marketplace in Bangladesh. Bangla/English, BDT, bKash/Nagad/COD via Messenger." />

  <!-- React 18 -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    body { margin: 0; padding: 0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial; }
    .line-clamp-2{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;}
  </style>
</head>

<body class="bg-gray-50">
  <div id="root"></div>

  <script type="text/babel">
    const { useEffect, useMemo, useState } = React;

    // -------------------------
    // Helpers
    // -------------------------
    const formatBDT = (n) => `‡ß≥${Number(n || 0).toLocaleString("en-US")}`;
    const genOrderId = () => `SB${Math.floor(100000 + Math.random() * 900000)}`;

    // ‚úÖ Your FB details
    const FB_PAGE_ID = "61582055433127";
    const FB_PAGE_LINK = "https://www.facebook.com/profile.php?id=61582055433127";
    const FB_MESSENGER_LINK = `https://m.me/${FB_PAGE_ID}`;

    async function copyText(text) {
      try {
        await navigator.clipboard.writeText(text);
        return true;
      } catch (e) {
        return false;
      }
    }

    function buildProductMessage({ storeName, product, qty, lang }) {
      const pname = product?.name?.[lang] || product?.name?.en || "Product";
      const lineTotal = (product?.price || 0) * (qty || 1);
      return [
        `Hello ${storeName}! I want to order:`,
        `‚Ä¢ Product: ${pname}`,
        `‚Ä¢ Price: ${formatBDT(product?.price)}`,
        `‚Ä¢ Qty: ${qty}`,
        `‚Ä¢ Total: ${formatBDT(lineTotal)}`,
        `‚Ä¢ Product ID: ${product?.id}`,
        ``,
        `Please confirm availability & delivery.`
      ].join("\n");
    }

    function buildCartMessage({ storeName, cart, lang, deliveryFee, discount, grandTotal }) {
      const lines = [];
      lines.push(`Hello ${storeName}! I want to place an order (Cart Checkout):`);
      lines.push(`Order Items:`);
      cart.forEach((i, idx) => {
        const pname = i?.name?.[lang] || i?.name?.en || "Product";
        lines.push(`${idx+1}) ${pname} ‚Äî ${formatBDT(i.price)} √ó ${i.quantity} = ${formatBDT(i.price * i.quantity)}`);
      });
      lines.push(``);
      lines.push(`Delivery Fee: ${deliveryFee === 0 ? "FREE" : formatBDT(deliveryFee)}`);
      if (discount > 0) lines.push(`Discount: ‚àí${formatBDT(discount)}`);
      lines.push(`Grand Total: ${formatBDT(grandTotal)}`);
      lines.push(``);
      lines.push(`Please confirm delivery & payment method.`);
      return lines.join("\n");
    }

    // -------------------------
    // Translations
    // -------------------------
    const TRANSLATIONS = {
      en: {
        tagline: "Shop Easy, Live Easy",
        heroTitle: "Welcome to Shohoz Bazar",
        heroSubtitle: "Everything in one place, easily",
        shopNow: "Shop Now",
        searchPlaceholder: "Search products, brands, categories‚Ä¶",
        flashSale: "Flash Sale",
        endsIn: "Ends in",
        topDeals: "Top Deals",
        customersLove: "Customers Love Shohoz Bazar",
        account: "Account",
        wishlist: "Wishlist",
        cart: "Cart",
        home: "Home",
        shop: "Shop",
        categories: "Categories",
        allProducts: "All Products",
        productsFound: "products found",
        addToCart: "Add to Cart",
        buyNow: "Buy Now",
        inStock: "In stock",
        outOfStock: "Out of stock",
        onlyLeft: "Only left",
        delivery: "Delivery",
        reviews: "reviews",
        subtotal: "Subtotal",
        deliveryFee: "Delivery Fee",
        free: "FREE",
        total: "Total",
        coupon: "Coupon",
        apply: "Apply",
        proceedCheckout: "Checkout on Messenger",
        continueShopping: "Continue Shopping",
        emptyCartTitle: "Your cart is empty",
        emptyCartSubtitle: "Add some products to get started!",
        startShopping: "Start Shopping",
        checkout: "Checkout",
        address: "Delivery Address",
        payment: "Payment Method",
        reviewOrder: "Review Order",
        placeOrder: "Place Order",
        cod: "Cash on Delivery",
        payBkash: "Pay with bKash",
        payNagad: "Pay with Nagad",
        orderPlaced: "Order Created!",
        orderPlacedMsg: "We will confirm on Messenger.",
        trackOrder: "Track Order",
        track: "Track",
        orderId: "Order ID",
        statusTimeline: "Status Timeline",
        confirmed: "Confirmed",
        packed: "Packed",
        shipped: "Shipped",
        outForDelivery: "Out for delivery",
        delivered: "Delivered",
        backHome: "Back to Home",
        viewDetails: "View Details",
        sortBy: "Sort by",
        sortPopular: "Popular",
        sortLowHigh: "Price: Low ‚Üí High",
        sortHighLow: "Price: High ‚Üí Low",
        filterPrice: "Price Range",
        clear: "Clear",
        freeShipHint: "Add more to get FREE delivery",
        policies: "Policies",
        quickLinks: "Quick Links",
        about: "About",
        contact: "Contact",
        faq: "FAQ",
        returnRefund: "Return & Refund",
        privacy: "Privacy Policy",
        terms: "Terms & Conditions",
        support: "Support",
        messageUs: "Message Us",
        messageToOrder: "Message to Order",
        copiedHint: "Order info copied. Paste it in Messenger.",
        openMessenger: "Open Messenger",
      },
      bn: {
        tagline: "‡¶∏‡¶π‡¶ú‡ßá ‡¶ï‡¶ø‡¶®‡ßÅ‡¶®, ‡¶∏‡¶π‡¶ú‡ßá ‡¶•‡¶æ‡¶ï‡ßÅ‡¶®",
        heroTitle: "Shohoz Bazar ‡¶è ‡¶∏‡ßç‡¶¨‡¶æ‡¶ó‡¶§‡¶Æ",
        heroSubtitle: "‡¶∏‡¶¨‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶è‡¶ï ‡¶ú‡¶æ‡ßü‡¶ó‡¶æ‡ßü, ‡¶∏‡¶π‡¶ú‡ßá",
        shopNow: "‡¶è‡¶ñ‡¶®‡¶á ‡¶ï‡¶ø‡¶®‡ßÅ‡¶®",
        searchPlaceholder: "‡¶™‡¶£‡ßç‡¶Ø, ‡¶¨‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°, ‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶ó‡¶∞‡¶ø ‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßÅ‡¶®‚Ä¶",
        flashSale: "‡¶´‡ßç‡¶≤‡ßç‡¶Ø‡¶æ‡¶∂ ‡¶∏‡ßá‡¶≤",
        endsIn: "‡¶∂‡ßá‡¶∑ ‡¶π‡¶¨‡ßá",
        topDeals: "‡¶∏‡ßá‡¶∞‡¶æ ‡¶Ö‡¶´‡¶æ‡¶∞",
        customersLove: "‡¶ï‡ßç‡¶∞‡ßá‡¶§‡¶æ‡¶∞‡¶æ Shohoz Bazar ‡¶™‡¶õ‡¶®‡ßç‡¶¶ ‡¶ï‡¶∞‡ßá‡¶®",
        account: "‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü",
        wishlist: "‡¶á‡¶ö‡ßç‡¶õ‡ßá‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ",
        cart: "‡¶ï‡¶æ‡¶∞‡ßç‡¶ü",
        home: "‡¶π‡ßã‡¶Æ",
        shop: "‡¶∂‡¶™",
        categories: "‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶ó‡¶∞‡¶ø",
        allProducts: "‡¶∏‡¶¨ ‡¶™‡¶£‡ßç‡¶Ø",
        productsFound: "‡¶ü‡¶ø ‡¶™‡¶£‡ßç‡¶Ø ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶ó‡ßá‡¶õ‡ßá",
        addToCart: "‡¶ï‡¶æ‡¶∞‡ßç‡¶ü‡ßá ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®",
        buyNow: "‡¶è‡¶ñ‡¶®‡¶á ‡¶ï‡¶ø‡¶®‡ßÅ‡¶®",
        inStock: "‡¶∏‡ßç‡¶ü‡¶ï‡ßá ‡¶Ü‡¶õ‡ßá",
        outOfStock: "‡¶∏‡ßç‡¶ü‡¶ï ‡¶∂‡ßá‡¶∑",
        onlyLeft: "‡¶Ö‡¶¨‡¶∂‡¶ø‡¶∑‡ßç‡¶ü",
        delivery: "‡¶°‡ßá‡¶≤‡¶ø‡¶≠‡¶æ‡¶∞‡¶ø",
        reviews: "‡¶∞‡¶ø‡¶≠‡¶ø‡¶â",
        subtotal: "‡¶∏‡¶æ‡¶¨‡¶ü‡ßã‡¶ü‡¶æ‡¶≤",
        deliveryFee: "‡¶°‡ßá‡¶≤‡¶ø‡¶≠‡¶æ‡¶∞‡¶ø ‡¶ö‡¶æ‡¶∞‡ßç‡¶ú",
        free: "‡¶´‡ßç‡¶∞‡¶ø",
        total: "‡¶Æ‡ßã‡¶ü",
        coupon: "‡¶ï‡ßÅ‡¶™‡¶®",
        apply: "‡¶™‡ßç‡¶∞‡ßü‡ßã‡¶ó",
        proceedCheckout: "‡¶Æ‡ßá‡¶∏‡ßá‡¶û‡ßç‡¶ú‡¶æ‡¶∞‡ßá ‡¶ö‡ßá‡¶ï‡¶Ü‡¶â‡¶ü",
        continueShopping: "‡¶∂‡¶™‡¶ø‡¶Ç ‡¶ö‡¶æ‡¶≤‡¶ø‡ßü‡ßá ‡¶Ø‡¶æ‡¶®",
        emptyCartTitle: "‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ï‡¶æ‡¶∞‡ßç‡¶ü ‡¶ñ‡¶æ‡¶≤‡¶ø",
        emptyCartSubtitle: "‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡¶§‡ßá ‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶™‡¶£‡ßç‡¶Ø ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®!",
        startShopping: "‡¶∂‡¶™‡¶ø‡¶Ç ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶®",
        checkout: "‡¶ö‡ßá‡¶ï‡¶Ü‡¶â‡¶ü",
        address: "‡¶°‡ßá‡¶≤‡¶ø‡¶≠‡¶æ‡¶∞‡¶ø ‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ",
        payment: "‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶™‡¶¶‡ßç‡¶ß‡¶§‡¶ø",
        reviewOrder: "‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶∞‡¶ø‡¶≠‡¶ø‡¶â",
        placeOrder: "‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®",
        cod: "‡¶ï‡ßç‡¶Ø‡¶æ‡¶∂ ‡¶Ö‡¶® ‡¶°‡ßá‡¶≤‡¶ø‡¶≠‡¶æ‡¶∞‡¶ø",
        payBkash: "bKash ‡¶¶‡¶ø‡ßü‡ßá ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü",
        payNagad: "Nagad ‡¶¶‡¶ø‡ßü‡ßá ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü",
        orderPlaced: "‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶§‡ßà‡¶∞‡¶ø ‡¶π‡ßü‡ßá‡¶õ‡ßá!",
        orderPlacedMsg: "‡¶Æ‡ßá‡¶∏‡ßá‡¶û‡ßç‡¶ú‡¶æ‡¶∞‡ßá ‡¶ï‡¶®‡¶´‡¶æ‡¶∞‡ßç‡¶Æ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶¨‡ßá‡•§",
        trackOrder: "‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®",
        track: "‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï",
        orderId: "‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶Ü‡¶á‡¶°‡¶ø",
        statusTimeline: "‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏ ‡¶ü‡¶æ‡¶á‡¶Æ‡¶≤‡¶æ‡¶á‡¶®",
        confirmed: "‡¶ï‡¶®‡¶´‡¶æ‡¶∞‡ßç‡¶Æ‡¶°",
        packed: "‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡¶°",
        shipped: "‡¶∂‡¶ø‡¶™‡¶°",
        outForDelivery: "‡¶°‡ßá‡¶≤‡¶ø‡¶≠‡¶æ‡¶∞‡¶ø‡¶∞ ‡¶™‡¶•‡ßá",
        delivered: "‡¶°‡ßá‡¶≤‡¶ø‡¶≠‡¶æ‡¶∞‡¶°",
        backHome: "‡¶π‡ßã‡¶Æ‡ßá ‡¶´‡¶ø‡¶∞‡ßá ‡¶Ø‡¶æ‡¶®",
        viewDetails: "‡¶°‡¶ø‡¶ü‡ßá‡¶á‡¶≤‡¶∏ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®",
        sortBy: "‡¶∏‡¶æ‡¶ú‡¶æ‡¶®",
        sortPopular: "‡¶ú‡¶®‡¶™‡ßç‡¶∞‡¶ø‡ßü",
        sortLowHigh: "‡¶¶‡¶æ‡¶Æ: ‡¶ï‡¶Æ ‚Üí ‡¶¨‡ßá‡¶∂‡¶ø",
        sortHighLow: "‡¶¶‡¶æ‡¶Æ: ‡¶¨‡ßá‡¶∂‡¶ø ‚Üí ‡¶ï‡¶Æ",
        filterPrice: "‡¶¶‡¶æ‡¶Æ‡ßá‡¶∞ ‡¶∏‡ßÄ‡¶Æ‡¶æ",
        clear: "‡¶∞‡¶ø‡¶∏‡ßá‡¶ü",
        freeShipHint: "‡¶Ü‡¶∞ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶´‡ßç‡¶∞‡¶ø ‡¶°‡ßá‡¶≤‡¶ø‡¶≠‡¶æ‡¶∞‡¶ø‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø",
        policies: "‡¶®‡ßÄ‡¶§‡¶ø‡¶Æ‡¶æ‡¶≤‡¶æ",
        quickLinks: "‡¶≤‡¶ø‡¶Ç‡¶ï",
        about: "‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶∏‡¶Æ‡ßç‡¶™‡¶∞‡ßç‡¶ï‡ßá",
        contact: "‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó",
        faq: "‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®‡ßã‡¶§‡ßç‡¶§‡¶∞",
        returnRefund: "‡¶∞‡¶ø‡¶ü‡¶æ‡¶∞‡ßç‡¶® ‡¶ì ‡¶∞‡¶ø‡¶´‡¶æ‡¶®‡ßç‡¶°",
        privacy: "‡¶™‡ßç‡¶∞‡¶æ‡¶á‡¶≠‡ßá‡¶∏‡¶ø",
        terms: "‡¶∂‡¶∞‡ßç‡¶§‡¶æ‡¶¨‡¶≤‡ßÄ",
        support: "‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü",
        messageUs: "‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶ï‡¶∞‡ßÅ‡¶®",
        messageToOrder: "‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú",
        copiedHint: "‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶ï‡¶™‡¶ø ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§ ‡¶Æ‡ßá‡¶∏‡ßá‡¶û‡ßç‡¶ú‡¶æ‡¶∞‡ßá ‡¶™‡ßá‡¶∏‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®‡•§",
        openMessenger: "‡¶Æ‡ßá‡¶∏‡ßá‡¶û‡ßç‡¶ú‡¶æ‡¶∞ ‡¶ñ‡ßÅ‡¶≤‡ßÅ‡¶®",
      }
    };

    // -------------------------
    // App
    // -------------------------
    function ShohozBazarApp() {
      const STORE_NAME = "Shohoz Bazar";

      const [lang, setLang] = useState("bn");
      const t = TRANSLATIONS[lang];

      const [cart, setCart] = useState([]);
      const [wishlist, setWishlist] = useState([]);
      const [page, setPage] = useState("home"); // home | shop | product | cart
      const [selectedProduct, setSelectedProduct] = useState(null);

      const [toast, setToast] = useState(null); // {type, msg}
      const showToast = (msg, type="ok") => {
        setToast({ type, msg });
        setTimeout(() => setToast(null), 3200);
      };

      const [searchQuery, setSearchQuery] = useState("");
      const [selectedCategory, setSelectedCategory] = useState("all");

      const [sort, setSort] = useState("popular");
      const [minPrice, setMinPrice] = useState("");
      const [maxPrice, setMaxPrice] = useState("");

      const [coupon, setCoupon] = useState("");
      const [appliedCoupon, setAppliedCoupon] = useState(null);

      // Demo products
      // ‚úÖ Tip: set stock: 0 for out-of-stock demo
      const products = useMemo(() => ([
        { id: 1,  name: {en:'Premium Basmati Rice 5kg', bn:'‡¶™‡ßç‡¶∞‡¶ø‡¶Æ‡¶ø‡ßü‡¶æ‡¶Æ ‡¶¨‡¶æ‡¶∏‡¶Æ‡¶§‡¶ø ‡¶ö‡¶æ‡¶≤ ‡ß´ ‡¶ï‡ßá‡¶ú‡¶ø'}, category: 'groceries', price: 850, oldPrice: 950, rating: 4.5, reviews: 234, image: 'üåæ', discount: 11, stock: 45, delivery: '1-2 days' },
        { id: 2,  name: {en:'Cotton T-Shirt - Blue', bn:'‡¶ï‡¶ü‡¶® ‡¶ü‡¶ø-‡¶∂‡¶æ‡¶∞‡ßç‡¶ü - ‡¶®‡ßÄ‡¶≤'}, category: 'fashion', price: 599, oldPrice: 799, rating: 4.3, reviews: 156, image: 'üëï', discount: 25, stock: 0, delivery: '2-3 days' }, // out of stock
        { id: 3,  name: {en:'Wireless Earbuds', bn:'‡¶ì‡ßü‡ßç‡¶Ø‡¶æ‡¶∞‡¶≤‡ßá‡¶∏ ‡¶á‡ßü‡¶æ‡¶∞‡¶¨‡¶æ‡¶°‡¶∏'}, category: 'electronics', price: 2499, oldPrice: 3499, rating: 4.7, reviews: 891, image: 'üéß', discount: 29, stock: 12, delivery: '1-2 days' },
        { id: 4,  name: {en:'Face Cream SPF 50', bn:'‡¶´‡ßá‡¶∏ ‡¶ï‡ßç‡¶∞‡¶ø‡¶Æ SPF ‡ß´‡ß¶'}, category: 'beauty', price: 450, oldPrice: 600, rating: 4.6, reviews: 445, image: 'üß¥', discount: 25, stock: 67, delivery: '1-2 days' },
        { id: 5,  name: {en:'Non-Stick Cookware Set', bn:'‡¶®‡¶®-‡¶∏‡ßç‡¶ü‡¶ø‡¶ï ‡¶ï‡ßÅ‡¶ï‡¶ì‡ßü‡ßç‡¶Ø‡¶æ‡¶∞ ‡¶∏‡ßá‡¶ü'}, category: 'home', price: 3200, oldPrice: 4500, rating: 4.4, reviews: 203, image: 'üç≥', discount: 29, stock: 18, delivery: '2-3 days' },
        { id: 6,  name: {en:'Baby Diapers Pack of 48', bn:'‡¶¨‡ßá‡¶¨‡¶ø ‡¶°‡¶æ‡ßü‡¶æ‡¶™‡¶æ‡¶∞ ‡ß™‡ßÆ ‡¶™‡¶ø‡¶∏'}, category: 'baby', price: 890, oldPrice: 1050, rating: 4.8, reviews: 672, image: 'üë∂', discount: 15, stock: 89, delivery: '1-2 days' },
        { id: 7,  name: {en:'Notebook Set - 6 Pack', bn:'‡¶®‡ßã‡¶ü‡¶¨‡ßÅ‡¶ï ‡¶∏‡ßá‡¶ü - ‡ß¨ ‡¶™‡ßç‡¶Ø‡¶æ‡¶ï'}, category: 'stationery', price: 280, oldPrice: 350, rating: 4.2, reviews: 89, image: 'üìì', discount: 20, stock: 156, delivery: '1-2 days' },
        { id: 8,  name: {en:'Vitamin C Tablets', bn:'‡¶≠‡¶ø‡¶ü‡¶æ‡¶Æ‡¶ø‡¶® ‡¶∏‡¶ø ‡¶ü‡ßç‡¶Ø‡¶æ‡¶¨‡¶≤‡ßá‡¶ü'}, category: 'health', price: 650, oldPrice: 800, rating: 4.5, reviews: 321, image: 'üíä', discount: 19, stock: 94, delivery: '1-2 days' },
        { id: 9,  name: {en:'Premium Green Tea 100g', bn:'‡¶™‡ßç‡¶∞‡¶ø‡¶Æ‡¶ø‡ßü‡¶æ‡¶Æ ‡¶ó‡ßç‡¶∞‡¶ø‡¶® ‡¶ü‡¶ø ‡ßß‡ß¶‡ß¶ ‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ'}, category: 'groceries', price: 420, oldPrice: 500, rating: 4.6, reviews: 287, image: 'üçµ', discount: 16, stock: 73, delivery: '1-2 days' },
        { id: 10, name: {en:'Smart Watch Pro', bn:'‡¶∏‡ßç‡¶Æ‡¶æ‡¶∞‡ßç‡¶ü ‡¶ì‡ßü‡¶æ‡¶ö ‡¶™‡ßç‡¶∞‡ßã'}, category: 'electronics', price: 4999, oldPrice: 6999, rating: 4.4, reviews: 567, image: '‚åö', discount: 29, stock: 8, delivery: '2-3 days' },
        { id: 11, name: {en:'Lipstick Set - 5 Colors', bn:'‡¶≤‡¶ø‡¶™‡¶∏‡ßç‡¶ü‡¶ø‡¶ï ‡¶∏‡ßá‡¶ü - ‡ß´ ‡¶∞‡¶ô'}, category: 'beauty', price: 899, oldPrice: 1200, rating: 4.7, reviews: 445, image: 'üíÑ', discount: 25, stock: 34, delivery: '1-2 days' },
        { id: 12, name: {en:'LED Desk Lamp', bn:'‡¶è‡¶≤‡¶á‡¶°‡¶ø ‡¶°‡ßá‡¶∏‡ßç‡¶ï ‡¶≤‡ßç‡¶Ø‡¶æ‡¶Æ‡ßç‡¶™'}, category: 'home', price: 1250, oldPrice: 1800, rating: 4.3, reviews: 178, image: 'üí°', discount: 31, stock: 21, delivery: '2-3 days' },
      ]), []);

      const categories = useMemo(() => ([
        { id: 'all',        name: {en:'All', bn:'‡¶∏‡¶¨'}, icon: 'üõçÔ∏è' },
        { id: 'groceries',  name: {en:'Groceries', bn:'‡¶ó‡ßç‡¶∞‡ßã‡¶∏‡¶æ‡¶∞‡¶ø'}, icon: 'üõí' },
        { id: 'fashion',    name: {en:'Fashion', bn:'‡¶´‡ßç‡¶Ø‡¶æ‡¶∂‡¶®'}, icon: 'üëó' },
        { id: 'electronics',name: {en:'Electronics', bn:'‡¶á‡¶≤‡ßá‡¶ï‡¶ü‡ßç‡¶∞‡¶®‡¶ø‡¶ï‡ßç‡¶∏'}, icon: 'üì±' },
        { id: 'beauty',     name: {en:'Beauty', bn:'‡¶¨‡¶ø‡¶â‡¶ü‡¶ø'}, icon: 'üíÖ' },
        { id: 'home',       name: {en:'Home & Kitchen', bn:'‡¶π‡ßã‡¶Æ & ‡¶ï‡¶ø‡¶ö‡ßá‡¶®'}, icon: 'üè†' },
        { id: 'baby',       name: {en:'Baby & Kids', bn:'‡¶¨‡ßá‡¶¨‡¶ø & ‡¶ï‡¶ø‡¶°‡¶∏'}, icon: 'üß∏' },
        { id: 'stationery', name: {en:'Stationery', bn:'‡¶∏‡ßç‡¶ü‡ßá‡¶∂‡¶®‡¶æ‡¶∞‡¶ø'}, icon: '‚úèÔ∏è' },
        { id: 'health',     name: {en:'Health', bn:'‡¶π‡ßá‡¶≤‡¶•'}, icon: 'üè•' },
      ]), []);

      // Cart logic
      const addToCart = (product, qty=1) => {
        if (product.stock <= 0) {
          showToast(t.outOfStock, "warn");
          return;
        }
        setCart(prev => {
          const existing = prev.find(i => i.id === product.id);
          if (existing) {
            return prev.map(i => i.id === product.id ? {...i, quantity: i.quantity + qty} : i);
          }
          return [...prev, {...product, quantity: qty}];
        });
        showToast(`${t.addToCart}: ${product.name[lang]}`);
      };

      const removeFromCart = (productId) => setCart(prev => prev.filter(i => i.id !== productId));

      const updateQuantity = (productId, change) => {
        setCart(prev => prev
          .map(i => i.id === productId ? {...i, quantity: i.quantity + change} : i)
          .filter(i => i.quantity > 0)
        );
      };

      const toggleWishlist = (product) => {
        setWishlist(prev => {
          const exists = prev.some(i => i.id === product.id);
          if (exists) {
            showToast(`Removed: ${product.name[lang]}`);
            return prev.filter(i => i.id !== product.id);
          }
          showToast(`Saved: ${product.name[lang]}`);
          return [...prev, product];
        });
      };

      const cartTotal = useMemo(() => cart.reduce((sum, i) => sum + i.price * i.quantity, 0), [cart]);
      const cartCount = useMemo(() => cart.reduce((sum, i) => sum + i.quantity, 0), [cart]);

      // Delivery rules
      const FREE_SHIP_THRESHOLD = 500;
      const DELIVERY_FEE = 60;
      const deliveryFee = cartTotal >= FREE_SHIP_THRESHOLD || cartTotal === 0 ? 0 : DELIVERY_FEE;

      // Coupon rules (demo)
      const couponDiscount = useMemo(() => {
        if (!appliedCoupon) return 0;
        if (appliedCoupon.code === "SB10") return Math.floor(cartTotal * 0.10);
        if (appliedCoupon.code === "SHIPFREE") return deliveryFee; // waive delivery
        return 0;
      }, [appliedCoupon, cartTotal, deliveryFee]);

      const grandTotal = Math.max(0, cartTotal + deliveryFee - couponDiscount);

      // Filtering + sorting
      const filteredProducts = useMemo(() => {
        let list = [...products];

        // category
        if (selectedCategory !== "all") list = list.filter(p => p.category === selectedCategory);

        // search
        const q = (searchQuery || "").trim().toLowerCase();
        if (q) list = list.filter(p => (p.name.en + " " + p.name.bn).toLowerCase().includes(q));

        // price filter
        const min = minPrice === "" ? null : Number(minPrice);
        const max = maxPrice === "" ? null : Number(maxPrice);
        if (min != null && !Number.isNaN(min)) list = list.filter(p => p.price >= min);
        if (max != null && !Number.isNaN(max)) list = list.filter(p => p.price <= max);

        // sort
        if (sort === "lowhigh") list.sort((a,b) => a.price - b.price);
        if (sort === "highlow") list.sort((a,b) => b.price - a.price);
        if (sort === "popular") list.sort((a,b) => (b.reviews - a.reviews)); // simple popularity proxy

        return list;
      }, [products, selectedCategory, searchQuery, minPrice, maxPrice, sort]);

      const goProduct = (p) => { setSelectedProduct(p); setPage("product"); window.scrollTo({top:0, behavior:"smooth"}); };

      // Coupon apply
      const applyCoupon = () => {
        const code = (coupon || "").trim().toUpperCase();
        if (!code) return;
        if (code === "SB10" || code === "SHIPFREE") {
          setAppliedCoupon({ code });
          showToast(`Applied: ${code}`);
        } else {
          setAppliedCoupon({ code: "INVALID" });
          showToast("Invalid coupon", "warn");
        }
      };

      const clearFilters = () => {
        setSort("popular");
        setMinPrice("");
        setMaxPrice("");
        setSearchQuery("");
        setSelectedCategory("all");
      };

      // ‚úÖ Messenger actions
      const messageProduct = async (product, qty=1) => {
        const msg = buildProductMessage({ storeName: STORE_NAME, product, qty, lang });
        const copied = await copyText(msg);
        if (!copied) {
          // fallback
          window.prompt("Copy and paste this message in Messenger:", msg);
        } else {
          showToast(t.copiedHint);
        }
        window.open(FB_MESSENGER_LINK, "_blank");
      };

      const checkoutOnMessenger = async () => {
        if (cart.length === 0) {
          showToast(t.emptyCartTitle, "warn");
          return;
        }
        const msg = buildCartMessage({
          storeName: STORE_NAME,
          cart,
          lang,
          deliveryFee,
          discount: couponDiscount,
          grandTotal
        });
        const copied = await copyText(msg);
        if (!copied) {
          window.prompt("Copy and paste this message in Messenger:", msg);
        } else {
          showToast(t.copiedHint);
        }
        window.open(FB_MESSENGER_LINK, "_blank");
      };

      // -------------------------
      // UI Components
      // -------------------------
      const ProductCard = ({ product }) => {
        const isWished = wishlist.some(w => w.id === product.id);
        const out = product.stock <= 0;

        return (
          <div className="bg-white rounded-xl shadow-sm hover:shadow-lg transition overflow-hidden">
            <div
              className="relative aspect-square bg-gray-100 flex items-center justify-center text-6xl cursor-pointer"
              onClick={() => goProduct(product)}
            >
              {product.image}
              {product.discount > 0 && (
                <div className="absolute top-2 left-2 bg-red-500 text-white px-2 py-1 rounded-lg text-xs font-bold">
                  -{product.discount}%
                </div>
              )}
              {out && (
                <div className="absolute bottom-2 left-2 bg-gray-900 text-white px-2 py-1 rounded-lg text-xs font-bold">
                  {t.outOfStock}
                </div>
              )}

              <button
                onClick={(e) => { e.stopPropagation(); toggleWishlist(product); }}
                className="absolute top-2 right-2 p-2 bg-white/90 rounded-full shadow hover:bg-white"
                aria-label="wishlist"
              >
                <span className={isWished ? "text-red-500" : ""}>{isWished ? "‚ù§Ô∏è" : "ü§ç"}</span>
              </button>
            </div>

            <div className="p-4">
              <h3
                className="font-semibold text-sm line-clamp-2 cursor-pointer hover:text-emerald-600"
                onClick={() => goProduct(product)}
              >
                {product.name[lang]}
              </h3>

              <div className="flex items-center gap-1 mt-2">
                <span>‚≠ê</span>
                <span className="text-sm font-semibold">{product.rating}</span>
                <span className="text-xs text-gray-500">({product.reviews} {t.reviews})</span>
              </div>

              <div className="flex items-center gap-2 mt-2">
                <span className="text-lg font-bold text-emerald-600">{formatBDT(product.price)}</span>
                {product.oldPrice && (
                  <span className="text-sm text-gray-400 line-through">{formatBDT(product.oldPrice)}</span>
                )}
              </div>

              <div className="text-xs text-gray-600 mt-2">
                üöö {t.delivery}: {product.delivery}
              </div>

              {!out && product.stock < 20 && (
                <div className="text-xs text-red-600 mt-2">‚ö†Ô∏è {t.onlyLeft}: {product.stock}</div>
              )}

              <div className="mt-3 grid grid-cols-2 gap-2">
                {!out ? (
                  <button
                    onClick={() => addToCart(product, 1)}
                    className="w-full bg-orange-500 hover:bg-orange-600 text-white py-2 rounded-lg font-semibold"
                  >
                    {t.addToCart}
                  </button>
                ) : (
                  <button
                    onClick={() => toggleWishlist(product)}
                    className="w-full bg-gray-900 hover:bg-gray-800 text-white py-2 rounded-lg font-semibold"
                  >
                    {t.wishlist}
                  </button>
                )}

                <button
                  onClick={() => out ? messageProduct(product, 1) : messageProduct(product, 1)}
                  className="w-full border border-gray-300 hover:border-emerald-600 py-2 rounded-lg font-semibold"
                >
                  {out ? t.messageToOrder : t.buyNow}
                </button>
              </div>
            </div>
          </div>
        );
      };

      const Header = () => (
        <header className="sticky top-0 z-50 bg-white shadow-sm">
          <div className="bg-emerald-600 text-white py-2 px-4 text-sm text-center">
            üéâ Flash Sale | Free Delivery on orders above {formatBDT(FREE_SHIP_THRESHOLD)} | bKash/Nagad/COD via Messenger
          </div>

          <div className="container mx-auto px-4 py-3">
            <div className="flex items-center justify-between gap-4">
              <div
                className="flex items-center gap-3 cursor-pointer"
                onClick={() => { setPage("home"); setSelectedProduct(null); }}
              >
                <!-- ‚úÖ your logo file in same directory -->
                <img
                  src="SB logoM.png"
                  alt="Shohoz Bazar Logo"
                  className="w-11 h-11 rounded-xl object-cover border"
                  onError={(e)=>{ e.currentTarget.style.display="none"; }}
                />
                <div>
                  <div className="font-extrabold text-lg text-emerald-700">Shohoz Bazar</div>
                  <div className="text-xs text-gray-500 hidden sm:block">{t.tagline}</div>
                </div>
              </div>

              <div className="flex-1 max-w-2xl hidden md:block">
                <div className="relative">
                  <input
                    type="text"
                    placeholder={t.searchPlaceholder}
                    className="w-full px-4 py-3 pr-12 border-2 border-gray-200 rounded-xl focus:border-emerald-500 focus:outline-none"
                    value={searchQuery}
                    onChange={(e) => { setSearchQuery(e.target.value); setPage("shop"); }}
                  />
                  <span className="absolute right-4 top-3.5 text-gray-400">üîç</span>
                </div>
              </div>

              <div className="flex items-center gap-2 sm:gap-3">
                <a
                  href={FB_PAGE_LINK}
                  target="_blank"
                  rel="noreferrer"
                  className="hidden md:flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-gray-100"
                  title="Facebook Page"
                >
                  <span>üìò</span><span className="text-sm font-semibold">{t.contact}</span>
                </a>

                <button
                  className="hidden md:flex items-center gap-2 px-3 py-2 rounded-lg bg-gray-900 text-white hover:bg-gray-800"
                  onClick={() => window.open(FB_MESSENGER_LINK, "_blank")}
                  title="Message us on Messenger"
                >
                  <span>üí¨</span><span className="text-sm font-semibold">{t.messageUs}</span>
                </button>

                <button
                  className="px-3 py-2 rounded-lg hover:bg-gray-100"
                  onClick={() => setLang(prev => prev === "bn" ? "en" : "bn")}
                  title="Toggle language"
                >
                  <span className="text-sm font-semibold">{lang === "bn" ? "EN" : "BN"}</span>
                </button>

                <button className="relative px-3 py-2 rounded-lg hover:bg-gray-100" onClick={() => setPage("wishlist")}>
                  <span className="text-xl">‚ù§Ô∏è</span>
                  {wishlist.length > 0 && (
                    <span className="absolute -top-1 -right-1 bg-red-500 text-white text-xs w-5 h-5 rounded-full flex items-center justify-center">
                      {wishlist.length}
                    </span>
                  )}
                </button>

                <button className="relative px-3 py-2 rounded-lg hover:bg-gray-100" onClick={() => setPage("cart")}>
                  <span className="text-xl">üõí</span>
                  {cartCount > 0 && (
                    <span className="absolute -top-1 -right-1 bg-emerald-600 text-white text-xs w-5 h-5 rounded-full flex items-center justify-center">
                      {cartCount}
                    </span>
                  )}
                </button>
              </div>
            </div>

            <div className="mt-3 md:hidden">
              <div className="relative">
                <input
                  type="text"
                  placeholder={t.searchPlaceholder}
                  className="w-full px-4 py-2 pr-10 border-2 border-gray-200 rounded-xl focus:border-emerald-500 focus:outline-none"
                  value={searchQuery}
                  onChange={(e) => { setSearchQuery(e.target.value); setPage("shop"); }}
                />
                <span className="absolute right-3 top-2.5 text-gray-400">üîç</span>
              </div>

              <div className="mt-2 flex gap-2">
                <button
                  className="flex-1 px-3 py-2 rounded-xl bg-gray-900 text-white font-bold"
                  onClick={() => window.open(FB_MESSENGER_LINK, "_blank")}
                >
                  üí¨ {t.messageUs}
                </button>
                <a
                  className="flex-1 px-3 py-2 rounded-xl border font-bold text-center"
                  href={FB_PAGE_LINK}
                  target="_blank"
                  rel="noreferrer"
                >
                  üìò {t.contact}
                </a>
              </div>
            </div>
          </div>

          <div className="border-t overflow-x-auto">
            <div className="container mx-auto px-4">
              <div className="flex gap-3 py-3 whitespace-nowrap">
                {categories.map(cat => (
                  <button
                    key={cat.id}
                    onClick={() => { setSelectedCategory(cat.id); setPage("shop"); }}
                    className={`flex items-center gap-2 px-4 py-2 rounded-full transition ${
                      selectedCategory === cat.id ? "bg-emerald-600 text-white" : "bg-gray-100 hover:bg-gray-200"
                    }`}
                  >
                    <span>{cat.icon}</span>
                    <span className="text-sm font-semibold">{cat.name[lang]}</span>
                  </button>
                ))}
              </div>
            </div>
          </div>
        </header>
      );

      const Footer = () => (
        <footer className="bg-gray-900 text-white mt-16">
          <div className="container mx-auto px-4 py-12">
            <div className="grid md:grid-cols-4 gap-8">
              <div>
                <h3 className="font-bold text-lg mb-4">Shohoz Bazar</h3>
                <p className="text-gray-400 text-sm mb-4">
                  Mixed online marketplace for Bangladesh ‚Äî browse fast, order via Messenger.
                </p>
                <div className="flex gap-2 text-sm">
                  <span className="px-2 py-1 rounded bg-emerald-700">bKash</span>
                  <span className="px-2 py-1 rounded bg-orange-600">Nagad</span>
                  <span className="px-2 py-1 rounded bg-gray-700">COD</span>
                </div>

                <div className="mt-4 flex gap-2">
                  <a href={FB_PAGE_LINK} target="_blank" rel="noreferrer" className="px-3 py-2 rounded-lg bg-white/10 hover:bg-white/20 text-sm font-bold">
                    üìò Facebook
                  </a>
                  <a href={FB_MESSENGER_LINK} target="_blank" rel="noreferrer" className="px-3 py-2 rounded-lg bg-white/10 hover:bg-white/20 text-sm font-bold">
                    üí¨ Messenger
                  </a>
                </div>
              </div>

              <div>
                <h3 className="font-bold text-lg mb-4">{t.quickLinks}</h3>
                <ul className="space-y-2 text-sm text-gray-400">
                  <li className="hover:text-white cursor-pointer">{t.about}</li>
                  <li className="hover:text-white cursor-pointer">{t.contact}</li>
                  <li className="hover:text-white cursor-pointer">{t.faq}</li>
                </ul>
              </div>

              <div>
                <h3 className="font-bold text-lg mb-4">{t.policies}</h3>
                <ul className="space-y-2 text-sm text-gray-400">
                  <li className="hover:text-white cursor-pointer">{t.returnRefund}</li>
                  <li className="hover:text-white cursor-pointer">{t.privacy}</li>
                  <li className="hover:text-white cursor-pointer">{t.terms}</li>
                </ul>
              </div>

              <div>
                <h3 className="font-bold text-lg mb-4">{t.support}</h3>
                <ul className="space-y-2 text-sm text-gray-400">
                  <li>üìû +880 1234-567890</li>
                  <li>üìß support@shohozbazar.com</li>
                  <li>üìç Dhaka, Bangladesh</li>
                </ul>
              </div>
            </div>

            <div className="border-t border-gray-800 mt-8 pt-8 text-center text-sm text-gray-400">
              <p>¬© 2025 Shohoz Bazar. All rights reserved.</p>
            </div>
          </div>
        </footer>
      );

      const MobileBottomNav = () => (
        <div className="fixed bottom-0 left-0 right-0 bg-white border-t shadow-lg md:hidden z-50">
          <div className="grid grid-cols-5 gap-1 p-2">
            {[
              { icon: 'üè†', label: t.home, page: 'home' },
              { icon: 'üõçÔ∏è', label: t.shop, page: 'shop' },
              { icon: 'üí¨', label: t.messageUs, action: () => window.open(FB_MESSENGER_LINK, "_blank") },
              { icon: '‚ù§Ô∏è', label: t.wishlist, page: 'wishlist', badge: wishlist.length },
              { icon: 'üõí', label: t.cart, page: 'cart', badge: cartCount },
            ].map((item, i) => (
              <button
                key={i}
                onClick={() => item.action ? item.action() : setPage(item.page)}
                className="flex flex-col items-center gap-1 py-2 relative"
              >
                <span className="text-xl">{item.icon}</span>
                <span className="text-[11px]">{item.label}</span>
                {item.badge > 0 && (
                  <span className="absolute top-1 right-2 bg-red-500 text-white text-xs w-4 h-4 rounded-full flex items-center justify-center">
                    {item.badge}
                  </span>
                )}
              </button>
            ))}
          </div>
        </div>
      );

      const Toast = () => (
        toast ? (
          <div className="fixed top-4 left-1/2 -translate-x-1/2 z-[9999]">
            <div className={`px-4 py-3 rounded-xl shadow-lg text-sm font-bold ${
              toast.type === "warn" ? "bg-orange-600 text-white" : "bg-gray-900 text-white"
            }`}>
              {toast.msg}
            </div>
          </div>
        ) : null
      );

      // -------------------------
      // Pages
      // -------------------------
      const HomePage = () => (
        <div>
          <div className="bg-gradient-to-r from-emerald-500 to-emerald-700 text-white py-16 px-4">
            <div className="container mx-auto text-center">
              <h1 className="text-4xl md:text-5xl font-extrabold mb-4">{t.heroTitle}</h1>
              <p className="text-xl mb-8">{t.heroSubtitle}</p>

              <div className="flex flex-col sm:flex-row gap-3 justify-center">
                <button
                  onClick={() => setPage("shop")}
                  className="bg-orange-500 hover:bg-orange-600 text-white px-8 py-3 rounded-xl text-lg font-bold transition"
                >
                  {t.shopNow}
                </button>
                <button
                  onClick={() => window.open(FB_MESSENGER_LINK, "_blank")}
                  className="bg-gray-900 hover:bg-gray-800 text-white px-8 py-3 rounded-xl text-lg font-bold transition"
                >
                  üí¨ {t.messageUs}
                </button>
              </div>
            </div>
          </div>

          <div className="container mx-auto px-4 py-8">
            <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
              {[
                { icon: "üöö", title: "Fast Delivery", sub: "1-2 days delivery" },
                { icon: "‚Ü©Ô∏è", title: "Easy Returns", sub: "7 days return policy" },
                { icon: "üõ°Ô∏è", title: "Trusted", sub: "Quality checked products" },
                { icon: "üíµ", title: "Cash on Delivery", sub: "Pay when you receive" },
              ].map((b, i) => (
                <div key={i} className="bg-white p-6 rounded-xl shadow-sm text-center">
                  <div className="text-5xl mb-3">{b.icon}</div>
                  <h3 className="font-semibold mb-1">{b.title}</h3>
                  <p className="text-sm text-gray-600">{b.sub}</p>
                </div>
              ))}
            </div>
          </div>

          <div className="bg-gradient-to-r from-orange-400 to-red-500 text-white py-8 px-4 mb-8">
            <div className="container mx-auto">
              <div className="flex items-center justify-between mb-6 gap-4 flex-wrap">
                <h2 className="text-3xl font-extrabold">‚ö° {t.flashSale}</h2>
                <div className="bg-white text-red-500 px-4 py-2 rounded-xl font-extrabold">
                  {t.endsIn}: 5h 23m
                </div>
              </div>
              <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                {products.filter(p => p.discount >= 25).slice(0, 4).map(p => (
                  <ProductCard key={p.id} product={p} />
                ))}
              </div>
            </div>
          </div>

          <div className="container mx-auto px-4 mb-12">
            <div className="flex items-center justify-between mb-6">
              <h2 className="text-3xl font-extrabold">üî• {t.topDeals}</h2>
              <button className="text-emerald-700 font-semibold hover:underline" onClick={() => setPage("shop")}>
                {t.shop} ‚Üí
              </button>
            </div>
            <div className="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4">
              {products.slice(0, 6).map(p => <ProductCard key={p.id} product={p} />)}
            </div>
          </div>

          <div className="container mx-auto px-4 py-12">
            <h2 className="text-3xl font-extrabold text-center mb-8">‚ù§Ô∏è {t.customersLove}</h2>
            <div className="grid md:grid-cols-3 gap-6">
              {[
                { name: 'Rahim Ahmed', rating: 5, text: 'Amazing service! Got my order within 24 hours.' },
                { name: 'Sadia Khan', rating: 5, text: 'Best prices and authentic products. Highly recommend!' },
                { name: 'Karim Hassan', rating: 5, text: 'Easy returns and great customer support. Love it!' },
              ].map((r, i) => (
                <div key={i} className="bg-white p-6 rounded-xl shadow-sm">
                  <div className="flex gap-1 mb-3 text-2xl">{'‚≠ê'.repeat(r.rating)}</div>
                  <p className="text-gray-700 mb-3">"{r.text}"</p>
                  <p className="font-semibold">{r.name}</p>
                </div>
              ))}
            </div>
          </div>
        </div>
      );

      const ShopPage = () => (
        <div className="container mx-auto px-4 py-8">
          <div className="flex flex-col lg:flex-row lg:items-end lg:justify-between gap-4 mb-6">
            <div>
              <h1 className="text-3xl font-extrabold mb-1">
                {selectedCategory === "all" ? t.allProducts : (categories.find(c => c.id === selectedCategory)?.name[lang] || t.allProducts)}
              </h1>
              <p className="text-gray-600">
                {filteredProducts.length} {t.productsFound}
              </p>
            </div>

            <div className="flex flex-wrap gap-3 items-center">
              <div className="flex items-center gap-2">
                <span className="text-sm text-gray-600">{t.sortBy}</span>
                <select
                  value={sort}
                  onChange={(e) => setSort(e.target.value)}
                  className="border rounded-lg px-3 py-2 bg-white"
                >
                  <option value="popular">{t.sortPopular}</option>
                  <option value="lowhigh">{t.sortLowHigh}</option>
                  <option value="highlow">{t.sortHighLow}</option>
                </select>
              </div>

              <div className="flex items-center gap-2">
                <span className="text-sm text-gray-600">{t.filterPrice}</span>
                <input
                  type="number"
                  value={minPrice}
                  onChange={(e) => setMinPrice(e.target.value)}
                  placeholder="min"
                  className="w-24 border rounded-lg px-3 py-2"
                />
                <input
                  type="number"
                  value={maxPrice}
                  onChange={(e) => setMaxPrice(e.target.value)}
                  placeholder="max"
                  className="w-24 border rounded-lg px-3 py-2"
                />
              </div>

              <button
                onClick={clearFilters}
                className="px-4 py-2 rounded-lg border hover:border-emerald-600 font-semibold"
              >
                {t.clear}
              </button>
            </div>
          </div>

          <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4">
            {filteredProducts.map(p => <ProductCard key={p.id} product={p} />)}
          </div>
        </div>
      );

      const ProductPage = () => {
        const p = selectedProduct;
        if (!p) return null;

        const isWished = wishlist.some(w => w.id === p.id);
        const out = p.stock <= 0;

        return (
          <div className="container mx-auto px-4 py-8">
            <button className="mb-4 text-emerald-700 font-semibold hover:underline" onClick={() => setPage("shop")}>
              ‚Üê {t.shop}
            </button>

            <div className="grid md:grid-cols-2 gap-8">
              <div className="bg-white rounded-2xl shadow-sm p-8 flex items-center justify-center text-8xl">
                {p.image}
              </div>

              <div className="bg-white rounded-2xl shadow-sm p-6">
                <div className="flex items-start justify-between gap-3">
                  <h1 className="text-2xl md:text-3xl font-extrabold">{p.name[lang]}</h1>
                  <button
                    onClick={() => toggleWishlist(p)}
                    className="px-3 py-2 rounded-xl border hover:border-emerald-600"
                    title="Wishlist"
                  >
                    {isWished ? "‚ù§Ô∏è" : "ü§ç"}
                  </button>
                </div>

                <div className="flex items-center gap-2 mt-3">
                  <span>‚≠ê</span>
                  <span className="font-semibold">{p.rating}</span>
                  <span className="text-sm text-gray-500">({p.reviews} {t.reviews})</span>
                </div>

                <div className="flex items-center gap-3 mt-4">
                  <span className="text-3xl font-extrabold text-emerald-700">{formatBDT(p.price)}</span>
                  {p.oldPrice && <span className="text-gray-400 line-through">{formatBDT(p.oldPrice)}</span>}
                  {p.discount > 0 && (
                    <span className="bg-red-50 text-red-600 border border-red-200 px-3 py-1 rounded-full font-bold text-sm">
                      -{p.discount}%
                    </span>
                  )}
                </div>

                <div className="mt-4 text-sm text-gray-700">
                  {out ? (
                    <div className="flex items-center gap-2">‚õî <span className="font-bold text-red-600">{t.outOfStock}</span></div>
                  ) : (
                    <div className="flex items-center gap-2">‚úÖ <span>{t.inStock}: {p.stock}</span></div>
                  )}
                  <div className="flex items-center gap-2 mt-1">üöö <span>{t.delivery}: {p.delivery}</span></div>
                </div>

                <div className="mt-6 flex gap-3">
                  <button
                    disabled={out}
                    onClick={() => addToCart(p, 1)}
                    className={`flex-1 py-3 rounded-xl font-extrabold ${
                      out ? "bg-gray-200 text-gray-500 cursor-not-allowed" : "bg-orange-500 hover:bg-orange-600 text-white"
                    }`}
                  >
                    {t.addToCart}
                  </button>

                  <button
                    onClick={() => messageProduct(p, 1)}
                    className="flex-1 bg-gray-900 hover:bg-gray-800 text-white py-3 rounded-xl font-extrabold"
                  >
                    {out ? t.messageToOrder : t.buyNow}
                  </button>
                </div>

                <div className="mt-6 border-t pt-4">
                  <h3 className="font-extrabold mb-2">Details</h3>
                  <ul className="text-sm text-gray-700 list-disc pl-5 space-y-1">
                    <li>Quality checked product</li>
                    <li>Messenger order confirmation</li>
                    <li>Support via Facebook Page</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        );
      };

      const CartPage = () => (
        <div className="container mx-auto px-4 py-8">
          <div className="flex items-center justify-between flex-wrap gap-3">
            <h1 className="text-3xl font-extrabold">{t.cart} ({cartCount})</h1>
            <button className="text-emerald-700 font-semibold hover:underline" onClick={() => setPage("shop")}>
              {t.continueShopping} ‚Üí
            </button>
          </div>

          {cart.length === 0 ? (
            <div className="text-center py-16">
              <div className="text-8xl mb-4">üõí</div>
              <h2 className="text-2xl font-semibold mb-2">{t.emptyCartTitle}</h2>
              <p className="text-gray-600 mb-6">{t.emptyCartSubtitle}</p>
              <button
                onClick={() => setPage("shop")}
                className="bg-emerald-600 hover:bg-emerald-700 text-white px-8 py-3 rounded-xl font-bold"
              >
                {t.startShopping}
              </button>
            </div>
          ) : (
            <div className="grid lg:grid-cols-3 gap-8 mt-6">
              <div className="lg:col-span-2 space-y-4">
                {cart.map(item => (
                  <div key={item.id} className="bg-white rounded-2xl shadow-sm p-4 flex gap-4">
                    <div className="w-24 h-24 bg-gray-100 rounded-xl flex items-center justify-center text-4xl flex-shrink-0 cursor-pointer"
                      onClick={() => goProduct(item)}
                    >
                      {item.image}
                    </div>

                    <div className="flex-1">
                      <h3 className="font-bold mb-1 cursor-pointer hover:text-emerald-700"
                        onClick={() => goProduct(item)}
                      >
                        {item.name[lang]}
                      </h3>
                      <div className="flex items-center gap-2">
                        <span className="text-lg font-extrabold text-emerald-700">{formatBDT(item.price)}</span>
                        {item.oldPrice && (
                          <span className="text-sm text-gray-400 line-through">{formatBDT(item.oldPrice)}</span>
                        )}
                      </div>
                      <div className="text-xs text-gray-600 mt-1">üöö {t.delivery}: {item.delivery}</div>
                    </div>

                    <div className="flex flex-col items-end justify-between">
                      <button onClick={() => removeFromCart(item.id)} className="text-red-500 hover:text-red-700 text-xl">‚úï</button>

                      <div className="flex items-center gap-2 border rounded-xl">
                        <button onClick={() => updateQuantity(item.id, -1)} className="p-2 hover:bg-gray-100 rounded-l-xl">‚àí</button>
                        <span className="px-4 font-extrabold">{item.quantity}</span>
                        <button onClick={() => updateQuantity(item.id, 1)} className="p-2 hover:bg-gray-100 rounded-r-xl">+</button>
                      </div>
                    </div>
                  </div>
                ))}
              </div>

              <div className="lg:col-span-1">
                <div className="bg-white rounded-2xl shadow-sm p-6 sticky top-24">
                  <h2 className="text-xl font-extrabold mb-4">Order Summary</h2>

                  <div className="space-y-3 mb-4 text-sm">
                    <div className="flex justify-between">
                      <span>{t.subtotal}</span>
                      <span className="font-bold">{formatBDT(cartTotal)}</span>
                    </div>
                    <div className="flex justify-between">
                      <span>{t.deliveryFee}</span>
                      <span className="font-bold">{deliveryFee === 0 ? t.free : formatBDT(deliveryFee)}</span>
                    </div>

                    <div className="pt-2">
                      <div className="flex gap-2">
                        <input
                          value={coupon}
                          onChange={(e) => setCoupon(e.target.value)}
                          placeholder={`${t.coupon} (SB10 / SHIPFREE)`}
                          className="flex-1 border rounded-xl px-3 py-2"
                        />
                        <button onClick={applyCoupon} className="px-4 py-2 rounded-xl bg-gray-900 text-white font-bold">
                          {t.apply}
                        </button>
                      </div>

                      {appliedCoupon && appliedCoupon.code === "INVALID" && (
                        <div className="mt-2 text-red-600 text-sm">Invalid coupon</div>
                      )}
                      {appliedCoupon && appliedCoupon.code !== "INVALID" && (
                        <div className="mt-2 text-emerald-700 text-sm">
                          Applied: <span className="font-bold">{appliedCoupon.code}</span> (‚àí{formatBDT(couponDiscount)})
                        </div>
                      )}
                    </div>

                    {cartTotal < FREE_SHIP_THRESHOLD && (
                      <div className="bg-orange-50 border border-orange-200 rounded-xl p-3 text-sm">
                        üí∞ {t.freeShipHint}: {formatBDT(FREE_SHIP_THRESHOLD - cartTotal)}
                      </div>
                    )}
                  </div>

                  <div className="border-t pt-4 mb-6">
                    <div className="flex justify-between text-lg font-extrabold">
                      <span>{t.total}</span>
                      <span className="text-emerald-700">{formatBDT(grandTotal)}</span>
                    </div>
                  </div>

                  <button
                    onClick={checkoutOnMessenger}
                    className="w-full bg-emerald-600 hover:bg-emerald-700 text-white py-3 rounded-xl font-extrabold text-lg transition mb-3"
                  >
                    üí¨ {t.proceedCheckout}
                  </button>

                  <button
                    onClick={() => setPage("shop")}
                    className="w-full border-2 border-gray-300 hover:border-emerald-600 py-3 rounded-xl font-bold"
                  >
                    {t.continueShopping}
                  </button>

                  <div className="mt-3 text-xs text-gray-500">
                    Note: We copy your order info automatically. Paste it in Messenger to confirm.
                  </div>
                </div>
              </div>
            </div>
          )}
        </div>
      );

      const WishlistPage = () => (
        <div className="container mx-auto px-4 py-8">
          <div className="flex items-center justify-between flex-wrap gap-3">
            <h1 className="text-3xl font-extrabold">{t.wishlist} ({wishlist.length})</h1>
            <button className="text-emerald-700 font-semibold hover:underline" onClick={() => setPage("shop")}>
              {t.shop} ‚Üí
            </button>
          </div>

          {wishlist.length === 0 ? (
            <div className="text-center py-16">
              <div className="text-8xl mb-4">‚ù§Ô∏è</div>
              <h2 className="text-2xl font-semibold mb-2">Your wishlist is empty</h2>
              <p className="text-gray-600 mb-6">Save your favorite items here!</p>
              <button onClick={() => setPage("shop")}
                className="bg-emerald-600 hover:bg-emerald-700 text-white px-8 py-3 rounded-xl font-bold"
              >
                {t.startShopping}
              </button>
            </div>
          ) : (
            <div className="mt-6 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4">
              {wishlist.map(p => <ProductCard key={p.id} product={p} />)}
            </div>
          )}
        </div>
      );

      // Render page
      const Page = () => {
        if (page === "home") return <HomePage />;
        if (page === "shop") return <ShopPage />;
        if (page === "product") return <ProductPage />;
        if (page === "cart") return <CartPage />;
        if (page === "wishlist") return <WishlistPage />;
        return <HomePage />;
      };

      return (
        <div className="min-h-screen bg-gray-50">
          <Toast />
          <Header />
          <main className="min-h-screen pb-20 md:pb-0">
            <Page />
          </main>
          <Footer />
          <MobileBottomNav />
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById("root"));
    root.render(<ShohozBazarApp />);
  </script>
</body>
</html>
